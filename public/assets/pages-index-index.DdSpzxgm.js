import{o as e,c as t,w as a,a as s,t as l,b as r,d as i,i as d,e as o,n,r as u,f as c,g as m,h as f,F as h,j as p}from"./index-C5riPmtc.js";import{_}from"./_plugin-vue_export-helper.BCo6x5W8.js";const g=_({components:{countdown:_({props:{startTime:{type:String},endTime:{type:String}},data:()=>({timer:null,d:0,h:0,m:0,s:0}),mounted(){this.time()},beforeDestroy(){clearInterval(this.timer),this.timer=null},computed:{sTime(){return this.startTime},eTime(){return this.endTime}},watch:{endTime(){clearInterval(this.timer),this.time()}},methods:{time(){let e=this.GetDateDiff(this.sTime,this.eTime);this.getCountdownTime(e)},GetDateDiff(e,t){e=e.replace(/\-/g,"/"),t=t.replace(/\-/g,"/");var a=new Date(e),s=new Date(t);return parseInt((s.getTime()-a.getTime())/1e3)},getCountdownTime(e){let t=e;t>0&&(this.timer=setInterval((()=>{0==t?(clearInterval(this.timer),this.h=0,this.m=0,this.s=0):(this.d=parseInt(e/3600/24),this.h=parseInt(t/3600%24),this.m=parseInt(t/60%60),this.s=parseInt(t%60),t--)}),1e3))}}},[["render",function(n,u,c,m,f,h){const p=d,_=o;return e(),t(_,{class:"countdown"},{default:a((()=>[0!=f.d?(e(),t(_,{key:0,class:"time"},{default:a((()=>[s(l(f.d)+" ",1),r(p,{style:{"font-size":"15rpx"}},{default:a((()=>[s("day")])),_:1})])),_:1})):i("",!0),r(_,{class:"time",style:{"margin-left":"9rpx"}},{default:a((()=>[s(l(f.h<10?"0"+f.h:f.h),1)])),_:1}),r(p,{class:"text",style:{color:"black","font-size":"25rpx"}},{default:a((()=>[s(":")])),_:1}),r(_,{class:"time"},{default:a((()=>[s(l(f.m<10?"0"+f.m:f.m),1)])),_:1}),r(p,{class:"text",style:{color:"black","font-size":"25rpx"}},{default:a((()=>[s(":")])),_:1}),r(_,{class:"time"},{default:a((()=>[s(l(f.s<10?"0"+f.s:f.s),1)])),_:1})])),_:1})}],["__scopeId","data-v-e5542071"]])},data:()=>({title:"Hello",number:null,taskorder:{status:null,user:{avatar:"",name:""}},shoplist:[],taskmodel:[]}),onLoad(e){if(e.x)return this.number=e.x,void this.getData();window.location.href="https://www.2hungry.app"},methods:{gopay(){n({url:"/pages/index/pay?x="+this.number})},getData(){var e=this;u({url:"https://hungrywm.com/api/taskorder/detail",method:"GET",data:{number:this.number},success:t=>{let a=t.data.data.taskmodel,s=[];a.forEach((function(e){let t=!0;for(var a=0;a<s.length;a++)s[a].id==e.item_idinfo.category.id&&(t=!1);t&&s.push(e.item_idinfo.category)}),this),s.forEach((function(e){let t=[];for(var s=0;s<a.length;s++)e.id==a[s].item_idinfo.category.id&&(t.push(a[s].item_idinfo),e.goods=t),console.log(e.goods)}),this),e.shoplist=s}}),u({url:"https://hungrywm.com/api/taskorder/detailorder",method:"GET",data:{number:this.number},success:e=>{this.taskorder=e.data.data}})},pay(){}}},[["render",function(d,n,u,_,g,y){const k=p,b=o,w=c("countdown");return e(),t(b,{class:"content"},{default:a((()=>[r(b,{class:"head"},{default:a((()=>[r(b,{class:"image"},{default:a((()=>[r(k,{src:g.taskorder.user.avatar,mode:""},null,8,["src"])])),_:1}),r(b,{class:"right"},{default:a((()=>[r(b,{class:"name"},{default:a((()=>[s(l(g.taskorder.user.name),1)])),_:1}),r(b,{class:"title"},{default:a((()=>[s(" Hi~You and I are only one takeaway away ")])),_:1})])),_:1})])),_:1}),r(b,{class:"djsbox"},{default:a((()=>[r(b,{class:"price"},{default:a((()=>[s(" RM"+l(g.taskorder.price),1)])),_:1}),r(b,{class:"djstime"},{default:a((()=>[0==g.taskorder.status?(e(),t(b,{key:0,class:""},{default:a((()=>[s(" Remaining time ")])),_:1})):i("",!0),0==g.taskorder.status?(e(),t(b,{key:1,class:"countd"},{default:a((()=>[r(w,{startTime:g.taskorder.sysnow,endTime:g.taskorder.freeze_at},null,8,["startTime","endTime"])])),_:1})):i("",!0),0==g.taskorder.status?(e(),t(b,{key:2,class:"dfdetail"},{default:a((()=>[r(b,{class:"title"},{default:a((()=>[s(" Payment instructions ")])),_:1}),r(b,{class:"detail",style:{"margin-top":"20rpx"}},{default:a((()=>[s(" 1. If the payment is not made within 15 minutes after the order is successfully created, the order will be automatically cancelled and you can place a new order. ")])),_:1}),r(b,{class:"detail"},{default:a((()=>[s(" 2. After the refund of the payment order is successful, the actual payment amount will be returned to the payer by the original method. ")])),_:1})])),_:1})):i("",!0),3==g.taskorder.status?(e(),t(b,{key:3,class:"dfdetail",style:{"background-color":"rgba(175, 175, 175, 0.2)",color:"#2d2d2d","text-align":"center"}},{default:a((()=>[r(b,{class:""},{default:a((()=>[s(" Order Cancelled ")])),_:1})])),_:1})):i("",!0),2==g.taskorder.status?(e(),t(b,{key:4,class:"dfdetail",style:{"background-color":"rgba(22, 227, 0, 0.2)",color:"#1bb900","text-align":"center"}},{default:a((()=>[r(b,{class:""},{default:a((()=>[s(" Order paid ")])),_:1})])),_:1})):i("",!0),0==g.taskorder.status?(e(),t(b,{key:5,class:"butpay",onClick:n[0]||(n[0]=e=>y.gopay())},{default:a((()=>[s(" Pay for a friend ")])),_:1})):i("",!0)])),_:1})])),_:1}),r(b,{class:"goodsbox"},{default:a((()=>[(e(!0),m(h,null,f(g.shoplist,(i=>(e(),t(b,{class:"shopitem"},{default:a((()=>[r(b,{class:"shoptitle"},{default:a((()=>[s(l(i.name),1)])),_:2},1024),(e(!0),m(h,null,f(i.goods,(i=>(e(),t(b,{class:"goodsitem"},{default:a((()=>[r(b,{class:"left"},{default:a((()=>[r(k,{src:i.image,mode:"aspectFill"},null,8,["src"])])),_:2},1024),r(b,{class:"mid"},{default:a((()=>[r(b,{class:"name"},{default:a((()=>[s(l(i.name),1)])),_:2},1024),r(b,{class:"detail",innerHTML:i.description},null,8,["innerHTML"]),r(b,{class:"number"},{default:a((()=>[s(" x1 ")])),_:1})])),_:2},1024),r(b,{class:"right"},{default:a((()=>[s(" RM"+l(i.price),1)])),_:2},1024)])),_:2},1024)))),256))])),_:2},1024)))),256))])),_:1})])),_:1})}],["__scopeId","data-v-22968e64"]]);export{g as default};
