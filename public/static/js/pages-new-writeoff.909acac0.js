(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-new-writeoff"],{"32cd":function(t,e,a){"use strict";a("6a54");var r=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(a("2634")),i=r(a("2fdc")),n={data:function(){return{popupSchool:!1,order:{},cardList:[],pricelist:[],currentschange:0,currentschange2:0,OrderStatus:{},djsTimes:60,isTimeout:!1}},onLoad:function(t){this.getData()},methods:{gourl:function(t){window.location.href=t},getOrderStatus:function(){var t=this;return(0,i.default)((0,o.default)().mark((function e(){var a,r;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.djsTimes){e.next=5;break}return t.isTimeout=!0,t.popupSchool=!0,t.OrderStatus.order_status=6,e.abrupt("return");case 5:return e.next=7,t.$u.api.getwirteOff({orderId:t.order.orderId});case 7:if(a=e.sent,t.OrderStatus=a.data,1!=t.OrderStatus.order_status){e.next=11;break}return e.abrupt("return");case 11:if(t.popupSchool=!0,5==t.OrderStatus.order_status){e.next=14;break}return e.abrupt("return");case 14:r=t,setTimeout((function(){r.djsTimes--,r.getOrderStatus()}),1e3);case 16:case"end":return e.stop()}}),e)})))()},clickCurrents:function(t,e){this.currentschange=e,this.order.amount=t},clickCurrents2:function(t,e){this.currentschange2=e,this.order.cardNo=t.cardNo,this.pricelist=t.amounts.split(".")},submit:function(){uni.showModal({title:"提醒",content:"是否确定核销?",confirmText:"确定",cancelText:"取消",success:function(t){t.confirm?this.postWriteOff():t.cancel}.bind(this)})},getData:function(){var t=this;return(0,i.default)((0,o.default)().mark((function e(){var a;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$u.api.getCardList();case 2:a=e.sent,t.cardList=a.data,t.pricelist=t.cardList[0].amounts.split("."),t.order.cardNo=t.cardList[0].cardNo,t.order.amount=t.pricelist[0];case 7:case"end":return e.stop()}}),e)})))()},postWriteOff:function(){var t=this;return(0,i.default)((0,o.default)().mark((function e(){var a;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$u.api.postWriteOff(t.order);case 2:a=e.sent,200==a.code&&(t.djsTimes=60,t.getOrderStatus());case 4:case"end":return e.stop()}}),e)})))()}}};e.default=n},5565:function(t,e,a){"use strict";var r=a("d26e"),o=a.n(r);o.a},"6ead":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return r}));var r={uPopup:a("a7a0").default},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"form_box"},[a("v-uni-view",{staticClass:"form_title"},[t._v("卡类型:")]),a("v-uni-view",{staticClass:"form_input",staticStyle:{"background-color":"#fff",padding:"0rpx"}},[a("v-uni-view",{staticClass:"choseBox2"},t._l(t.cardList,(function(e,r){return a("v-uni-view",{staticClass:"choseSons",class:{choseactive:t.currentschange2==r},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.clickCurrents2(e,r)}}},[a("v-uni-view",{},[a("v-uni-image",{staticStyle:{width:"50rpx",height:"50rpx"},attrs:{src:e.cardimage,mode:""}})],1),t._v(t._s(e.cardname))],1)})),1)],1)],1),a("v-uni-view",{staticClass:"form_box"},[a("v-uni-view",{staticClass:"form_title"},[t._v("卡面值:")]),a("v-uni-view",{staticClass:"form_input",staticStyle:{"background-color":"#fff",padding:"0rpx"}},[a("v-uni-view",{staticClass:"choseBox"},t._l(t.pricelist,(function(e,r){return a("v-uni-view",{staticClass:"choseSons",class:{choseactive:t.currentschange==r},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.clickCurrents(e,r)}}},[t._v(t._s(e))])})),1)],1)],1),a("v-uni-view",{staticClass:"form_box"},[a("v-uni-view",{staticClass:"form_title"},[t._v("卡号:")]),a("v-uni-view",{staticClass:"form_input"},[a("v-uni-input",{attrs:{type:"text",placeholder:"请输入卡号"},model:{value:t.order.cardAccount,callback:function(e){t.$set(t.order,"cardAccount",e)},expression:"order.cardAccount"}})],1)],1),a("v-uni-view",{staticClass:"form_box"},[a("v-uni-view",{staticClass:"form_title"},[t._v("卡密:")]),a("v-uni-view",{staticClass:"form_input"},[a("v-uni-input",{attrs:{type:"text",placeholder:"请输入卡密"},model:{value:t.order.cardpassword,callback:function(e){t.$set(t.order,"cardpassword",e)},expression:"order.cardpassword"}})],1)],1),a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"getSure",staticStyle:{color:"#fff"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("核销")])],1),a("u-popup",{attrs:{show:t.popupSchool,mode:"center",closeable:!1,round:"20",closeOnClickOverlay:!1},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.popupSchool=!1}}},[a("v-uni-view",{staticClass:"workPopup"},[5==t.OrderStatus.order_status?a("v-uni-view",{staticStyle:{position:"relative"}},[a("v-uni-image",{staticStyle:{width:"300rpx",height:"300rpx"},attrs:{src:"/static/loading.webp",mode:""}}),a("v-uni-view",{staticStyle:{position:"absolute",left:"270rpx",top:"120rpx","font-size":"45rpx","font-weight":"bold"}},[t._v(t._s(t.djsTimes))])],1):t._e(),4==t.OrderStatus.order_status?a("v-uni-view",{},[a("v-uni-image",{staticStyle:{width:"300rpx",height:"300rpx"},attrs:{src:"/static/success.webp",mode:""}})],1):t._e(),6==t.OrderStatus.order_status?a("v-uni-view",{},[a("v-uni-image",{staticStyle:{width:"300rpx",height:"300rpx"},attrs:{src:"/static/error.webp",mode:""}})],1):t._e(),a("v-uni-view",{},[5==t.OrderStatus.order_status?a("v-uni-text",[t._v("核验中...")]):t._e(),4==t.OrderStatus.order_status?a("v-uni-text",[t._v("成功...")]):t._e(),6!=t.OrderStatus.order_status||t.isTimeout?t._e():a("v-uni-text",[t._v("失败("+t._s(t.OrderStatus.message)+")")]),t.isTimeout?a("v-uni-text",[t._v("超时,请联系右下角客服")]):t._e()],1),a("v-uni-view",{staticStyle:{padding:"100rpx"}},[6==t.OrderStatus.order_status?a("v-uni-view",{staticClass:"getSure",staticStyle:{color:"#fff","background-color":"rgb(229,46,42)"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.popupSchool=!1}}},[t._v("重新核销")]):t._e(),4==t.OrderStatus.order_status?a("v-uni-view",{staticClass:"getSure",staticStyle:{color:"#fff","background-color":"rgb(0, 197, 59)"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gourl(t.OrderStatus.return_url)}}},[t._v("返回")]):t._e()],1)],1)],1)],1)},i=[]},"850d":function(t,e,a){var r=a("c86c");e=r(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */.u-line-1[data-v-d64f6730]{\n\n\ndisplay:-webkit-box!important;overflow:hidden;text-overflow:ellipsis;word-break:break-all;-webkit-line-clamp:1;-webkit-box-orient:vertical!important\n}.u-line-2[data-v-d64f6730]{\n\n\ndisplay:-webkit-box!important;overflow:hidden;text-overflow:ellipsis;word-break:break-all;-webkit-line-clamp:2;-webkit-box-orient:vertical!important\n}.u-line-3[data-v-d64f6730]{\n\n\ndisplay:-webkit-box!important;overflow:hidden;text-overflow:ellipsis;word-break:break-all;-webkit-line-clamp:3;-webkit-box-orient:vertical!important\n}.u-line-4[data-v-d64f6730]{\n\n\ndisplay:-webkit-box!important;overflow:hidden;text-overflow:ellipsis;word-break:break-all;-webkit-line-clamp:4;-webkit-box-orient:vertical!important\n}.u-line-5[data-v-d64f6730]{\n\n\ndisplay:-webkit-box!important;overflow:hidden;text-overflow:ellipsis;word-break:break-all;-webkit-line-clamp:5;-webkit-box-orient:vertical!important\n}.u-border[data-v-d64f6730]{border-width:.5px!important;border-color:#dadbde!important;border-style:solid}.u-border-top[data-v-d64f6730]{border-top-width:.5px!important;border-color:#dadbde!important;border-top-style:solid}.u-border-left[data-v-d64f6730]{border-left-width:.5px!important;border-color:#dadbde!important;border-left-style:solid}.u-border-right[data-v-d64f6730]{border-right-width:.5px!important;border-color:#dadbde!important;border-right-style:solid}.u-border-bottom[data-v-d64f6730]{border-bottom-width:.5px!important;border-color:#dadbde!important;border-bottom-style:solid}.u-border-top-bottom[data-v-d64f6730]{border-top-width:.5px!important;border-bottom-width:.5px!important;border-color:#dadbde!important;border-top-style:solid;border-bottom-style:solid}.u-reset-button[data-v-d64f6730]{padding:0;background-color:initial;\nfont-size:inherit;line-height:inherit;color:inherit;\n}\n.u-reset-button[data-v-d64f6730]::after{border:none}\n.u-hover-class[data-v-d64f6730]{opacity:.7}.u-primary-light[data-v-d64f6730]{color:#ecf5ff}.u-warning-light[data-v-d64f6730]{color:#fdf6ec}.u-success-light[data-v-d64f6730]{color:#f5fff0}.u-error-light[data-v-d64f6730]{color:#fef0f0}.u-info-light[data-v-d64f6730]{color:#f4f4f5}.u-primary-light-bg[data-v-d64f6730]{background-color:#ecf5ff}.u-warning-light-bg[data-v-d64f6730]{background-color:#fdf6ec}.u-success-light-bg[data-v-d64f6730]{background-color:#f5fff0}.u-error-light-bg[data-v-d64f6730]{background-color:#fef0f0}.u-info-light-bg[data-v-d64f6730]{background-color:#f4f4f5}.u-primary-dark[data-v-d64f6730]{color:#398ade}.u-warning-dark[data-v-d64f6730]{color:#f1a532}.u-success-dark[data-v-d64f6730]{color:#53c21d}.u-error-dark[data-v-d64f6730]{color:#e45656}.u-info-dark[data-v-d64f6730]{color:#767a82}.u-primary-dark-bg[data-v-d64f6730]{background-color:#398ade}.u-warning-dark-bg[data-v-d64f6730]{background-color:#f1a532}.u-success-dark-bg[data-v-d64f6730]{background-color:#53c21d}.u-error-dark-bg[data-v-d64f6730]{background-color:#e45656}.u-info-dark-bg[data-v-d64f6730]{background-color:#767a82}.u-primary-disabled[data-v-d64f6730]{color:#9acafc}.u-warning-disabled[data-v-d64f6730]{color:#f9d39b}.u-success-disabled[data-v-d64f6730]{color:#a9e08f}.u-error-disabled[data-v-d64f6730]{color:#f7b2b2}.u-info-disabled[data-v-d64f6730]{color:#c4c6c9}.u-primary[data-v-d64f6730]{color:#6e83e9}.u-warning[data-v-d64f6730]{color:#f9ae3d}.u-success[data-v-d64f6730]{color:#5ac725}.u-error[data-v-d64f6730]{color:#f56c6c}.u-info[data-v-d64f6730]{color:#909399}.u-primary-bg[data-v-d64f6730]{background-color:#6e83e9}.u-warning-bg[data-v-d64f6730]{background-color:#f9ae3d}.u-success-bg[data-v-d64f6730]{background-color:#5ac725}.u-error-bg[data-v-d64f6730]{background-color:#f56c6c}.u-info-bg[data-v-d64f6730]{background-color:#909399}.u-main-color[data-v-d64f6730]{color:#303133}.u-content-color[data-v-d64f6730]{color:#606266}.u-tips-color[data-v-d64f6730]{color:#909193}.u-light-color[data-v-d64f6730]{color:#c0c4cc}.u-safe-area-inset-top[data-v-d64f6730]{padding-top:0;padding-top:constant(safe-area-inset-top);padding-top:env(safe-area-inset-top)}.u-safe-area-inset-right[data-v-d64f6730]{padding-right:0;padding-right:constant(safe-area-inset-right);padding-right:env(safe-area-inset-right)}.u-safe-area-inset-bottom[data-v-d64f6730]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.u-safe-area-inset-left[data-v-d64f6730]{padding-left:0;padding-left:constant(safe-area-inset-left);padding-left:env(safe-area-inset-left)}\nuni-toast[data-v-d64f6730]{z-index:10090}uni-toast .uni-toast[data-v-d64f6730]{z-index:10090}\n[data-v-d64f6730]::-webkit-scrollbar{display:none;width:0!important;height:0!important;-webkit-appearance:none;background:transparent}\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.workPopup[data-v-d64f6730]{position:relative;width:%?600?%;height:%?600?%;border-radius:%?30?%;background-image:url(/static/motaibg.png);background-size:100% 100%;text-align:center}.choseBox2[data-v-d64f6730]{display:flex;flex-wrap:wrap;justify-content:space-between}.choseBox2 .choseSons[data-v-d64f6730]{width:%?200?%;padding:%?10?%;text-align:center;font-family:Source Han Sans CN;font-size:%?28?%;font-weight:400;border-radius:%?10?%;border:%?1?% solid #bdbdbd;margin-left:%?20?%}.choseBox2 .choseactive[data-v-d64f6730]{color:#0d0d0d;border:%?1?% solid #0091ff}.choseBox[data-v-d64f6730]{display:flex;flex-wrap:wrap;justify-content:space-between}.choseBox .choseSons[data-v-d64f6730]{width:%?156?%;height:%?80?%;display:flex;justify-content:center;align-items:center;color:#bdbdbd;text-align:center;font-family:Source Han Sans CN;font-size:%?28?%;font-weight:400;background:#f3f4f6;margin-top:%?30?%}.choseBox .choseactive[data-v-d64f6730]{color:#0d0d0d;background:#0091ff;color:#fff}.form_box[data-v-d64f6730]{background:#fff;padding:%?30?%}.form_box .form_title[data-v-d64f6730]{color:#26272a;font-size:%?26?%}.form_box .form_input[data-v-d64f6730]{margin-top:%?20?%;display:flex;align-items:center;background:#f3f4f5;padding:%?25?% %?20?%;font-size:%?28?%}.form_box .form_input uni-input[data-v-d64f6730]{font-size:%?28?%;font-weight:500;padding-left:%?10?%;width:80%}.form_box .form_input .form_area[data-v-d64f6730]{display:flex;align-items:center}',""]),t.exports=e},"881f":function(t,e,a){"use strict";a.r(e);var r=a("6ead"),o=a("c54c");for(var i in o)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(i);a("5565");var n=a("828b"),d=Object(n["a"])(o["default"],r["b"],r["c"],!1,null,"d64f6730",null,!1,r["a"],void 0);e["default"]=d.exports},c54c:function(t,e,a){"use strict";a.r(e);var r=a("32cd"),o=a.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(i);e["default"]=o.a},d26e:function(t,e,a){var r=a("850d");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var o=a("967dd").default;o("c2dc82c0",r,!0,{sourceMap:!1,shadowMode:!1})}}]);