(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-chatDetail"],{"0538":function(t,e,n){"use strict";var i=n("e330"),r=n("59ed"),o=n("861d"),s=n("1a2d"),a=n("f36a"),c=n("40d5"),u=Function,l=i([].concat),h=i([].join),d={},f=function(t,e,n){if(!s(d,e)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";d[e]=u("C,a","return new C("+h(i,",")+")")}return d[e](t,n)};t.exports=c?u.bind:function(t){var e=r(this),n=e.prototype,i=a(arguments,1),s=function(){var n=l(i,a(arguments));return this instanceof s?f(e,n.length,n):e.apply(t,n)};return o(n)&&(s.prototype=n),s}},"0fab":function(t,e,n){"use strict";var i=n("816c"),r=n.n(i);r.a},"29f1":function(t,e,n){"use strict";(function(t){n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("14d9"),n("ac1f"),n("99af");var r=i(n("2909")),o=i(n("5530")),s=i(n("e660")),a=i(n("b2b2")),c={data:function(){return{messageList:[],scrollTop:9999999999,contentHeight:0,bottomPx:0,messageInfo:null,windowWidth:0,windowHeight:0,newheight:0,params:{size:10,page:1,room_id:0},pages:"",old:{scrolTop:0},tokens:""}},created:function(){this.getMe()},onLoad:function(t){this.params.room_id=t.id,this.tokens=uni.getStorageSync("token");this.webscotconnect()},methods:{webscotconnect:function(){var e=this,n={broadcaster:"pusher",key:"test1",wsHost:"103.143.15.42",wsPort:6001,forceTLS:!1,disableStats:!0,cluster:"mt1",authEndpoint:"https://tmg-promote.com/broadcasting/auth",auth:{headers:{Authorization:"Bearer "+this.tokens}}},i=new s.default((0,o.default)((0,o.default)({},n),{},{client:new a.default(n.key,n)})),r=this.params.room_id,c="chat.room."+r;i.join(c).here((function(t){})).joining((function(t){})).leaving((function(t){})).error((function(e){t.error(e)})).listen("SendChatMessage",(function(n){var i=n.record;i.user=n.record.speaker,e.userInfo.id==i.user.id&&(i.isMy=!0),e.messageList.push(i),setTimeout((function(){e.scrollTop=e.scrollTop+120}),200),t.log(e.messageList)}))},jumpChatMoney:function(t){uni.navigateTo({url:"/pages/chat/chatMoney?id="+t})},getMaxHeight:function(){var e=this,n=uni.getSystemInfoSync().windowHeight,i=uni.createSelectorQuery();i.select(".sumbitInput").boundingClientRect(),i.select(".contentmessage").boundingClientRect(),i.exec((function(i){e.contentHeight=n-i[0].height,e.scrollTop=e.contentHeight,t.log("222",e.scrollTop)}))},getMe:function(){var e=this;this.$u.api.myInfo({}).then((function(n){t.log("userInfo",n),e.userInfo=n.data,e.getData()}))},longPressHandler:function(){t.log("长按事件被触发了")},openImage:function(t){uni.previewImage({current:0,urls:[t]})},loadmoreFun:function(){var t=this;this.params.page>=this.pages||(uni.showLoading({title:"loading"}),this.params.page++,this.$u.api.chatRecords(this.params).then((function(e){uni.hideLoading();var n=e.data.data;t.pages=e.data.meta.pagination.total_pages;for(var i=0;i<n.length;i++){var o=[];n[i].check=!1,t.userInfo.id==n[i].user.id&&(n[i].isMy=!0),o.push(n[i]),t.messageList=[].concat(o,(0,r.default)(t.messageList))}})))},scroll:function(t){this.newheight=t.detail.scrollHeight},getData:function(){var e=this;this.$u.api.chatRecords(this.params).then((function(n){uni.hideLoading();var i=n.data.data;e.pages=n.data.meta.pagination.total_pages;for(var o=0;o<i.length;o++){var s=[];i[o].check=!1,e.userInfo.id==i[o].user.id&&(i[o].isMy=!0),s.push(i[o]),e.messageList=[].concat(s,(0,r.default)(e.messageList)),setTimeout((function(){e.scrollTop=1e17}),200)}t.log("messageList",e.messageList)}))},jumprecord:function(){uni.navigateTo({url:"/pages/chat/chatuser?roomId="+this.params.room_id})},sentMesage:function(t){var e=this;0==t&&(this.postMessage=this.messageInfo),null!=this.postMessage&&""!=this.postMessage&&void 0!=this.postMessage?(uni.showLoading({title:"loading"}),this.$u.api.chatSend({room_id:this.params.room_id,content:this.postMessage,record_type:t,redpacket_amount:0,redpacket_count:0}).then((function(t){e.messageInfo="",uni.hideLoading()}))):uni.showToast({title:"sent message is null",icon:"none"})},postInfo:function(t){},uploading:function(t,e){var n=this;uni.uploadFile({url:"https://tmg-promote.com/api/tools/upload/local",filePath:t,name:"file",header:{Authorization:"Bearer "+uni.getStorageSync("token")},formData:{},success:function(t){t=JSON.parse(t.data),n.postMessage=t.data.url,n.sentMesage(1)}})},upMain:function(){var e=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(n){t.log(n.tempFilePaths[0]),e.uploading(n.tempFilePaths[0],1)}})}}};e.default=c}).call(this,n("5a52")["default"])},"2d0d":function(t,e,n){n("4ae1"),n("d3b7"),n("f8c9");var i=n("36c6"),r=n("6f8f"),o=n("6b58");t.exports=function(t){var e=r();return function(){var n,r=i(t);if(e){var s=i(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return o(this,n)}},t.exports.__esModule=!0,t.exports["default"]=t.exports},"36c6":function(t,e,n){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports,i(e)}n("131a"),n("3410"),t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},"3c96":function(t,e,n){n("d9e2"),n("d401"),t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports["default"]=t.exports},"4a4b":function(t,e,n){function i(e,n){return t.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports["default"]=t.exports,i(e,n)}n("131a"),t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},"4ae1":function(t,e,n){var i=n("23e7"),r=n("d066"),o=n("2ba4"),s=n("0538"),a=n("5087"),c=n("825a"),u=n("861d"),l=n("7c73"),h=n("d039"),d=r("Reflect","construct"),f=Object.prototype,p=[].push,v=h((function(){function t(){}return!(d((function(){}),[],t)instanceof t)})),g=!h((function(){d((function(){}))})),y=v||g;i({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(t,e){a(t),c(e);var n=arguments.length<3?t:a(arguments[2]);if(g&&!v)return d(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return o(p,i,e),new(o(s,t,i))}var r=n.prototype,h=l(u(r)?r:f),y=o(t,h,e);return u(y)?y:h}})},"5bc3":function(t,e,n){n("7a82");var i=n("a395");function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports["default"]=t.exports},"5d41":function(t,e,n){var i=n("23e7"),r=n("c65b"),o=n("861d"),s=n("825a"),a=n("c60d"),c=n("06cf"),u=n("e163");i({target:"Reflect",stat:!0},{get:function t(e,n){var i,l,h=arguments.length<3?e:arguments[2];return s(e)===h?e[n]:(i=c.f(e,n),i?a(i)?i.value:void 0===i.get?void 0:r(i.get,h):o(l=u(e))?t(l,n,h):void 0)}})},"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"6b58":function(t,e,n){n("d9e2"),n("d401");var i=n("7037")["default"],r=n("3c96");t.exports=function(t,e){if(e&&("object"===i(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return r(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},"6f8f":function(t,e,n){n("d3b7"),n("f8c9"),n("4ae1"),t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports["default"]=t.exports},"7ec2":function(t,e,n){n("7a82"),n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("b636"),n("944a"),n("0c47"),n("23dc"),n("3410"),n("d9e2"),n("d401"),n("14d9"),n("159b"),n("131a"),n("26e9"),n("fb6a");var i=n("7037")["default"];function r(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=r=function(){return e},t.exports.__esModule=!0,t.exports["default"]=t.exports;var e={},n=Object.prototype,o=n.hasOwnProperty,s=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(I){h=function(t,e,n){return t[e]=n}}function d(t,e,n,i){var r=e&&e.prototype instanceof v?e:v,o=Object.create(r.prototype),a=new O(i||[]);return s(o,"_invoke",{value:S(t,n,a)}),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=d;var p={};function v(){}function g(){}function y(){}var b={};h(b,c,(function(){return this}));var m=Object.getPrototypeOf,k=m&&m(m(E([])));k&&k!==n&&o.call(k,c)&&(b=k);var w=y.prototype=v.prototype=Object.create(b);function _(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var n;s(this,"_invoke",{value:function(r,s){function a(){return new e((function(n,a){(function n(r,s,a,c){var u=f(t[r],t,s);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==i(h)&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)})(r,s,n,a)}))}return n=n?n.then(a,a):a()}})}function S(t,e,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return L()}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var a=C(s,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=f(t,e,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function C(t,e){var n=e.method,i=t.iterator[n];if(void 0===i)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var r=f(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function E(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return g.prototype=y,s(w,"constructor",{value:y,configurable:!0}),s(y,"constructor",{value:g,configurable:!0}),g.displayName=h(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,h(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},_(x.prototype),h(x.prototype,u,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var s=new x(d(t,n,i,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},_(w),h(w,l,"Generator"),h(w,c,(function(){return this})),h(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=E,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return s.type="throw",s.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],s=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var a=o.call(r,"catchLoc"),c=o.call(r,"finallyLoc");if(a&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=e,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;P(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},"816c":function(t,e,n){var i=n("9478");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("3c27e6cc",i,!0,{sourceMap:!1,shadowMode:!1})},"867a":function(t,e,n){"use strict";n.r(e);var i=n("e305"),r=n("ffb1");for(var o in r)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n("0fab");var s=n("f0c5"),a=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"3d5665d5",null,!1,i["a"],void 0);e["default"]=a.exports},8962:function(t,e,n){n("d3b7"),n("f8c9"),n("5d41"),n("e439");var i=n("9f70");function r(){return"undefined"!==typeof Reflect&&Reflect.get?(t.exports=r=Reflect.get.bind(),t.exports.__esModule=!0,t.exports["default"]=t.exports):(t.exports=r=function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},t.exports.__esModule=!0,t.exports["default"]=t.exports),r.apply(this,arguments)}t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},9478:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */.u-line-1[data-v-3d5665d5]{display:-webkit-box!important;overflow:hidden;text-overflow:ellipsis;word-break:break-all;-webkit-line-clamp:1;-webkit-box-orient:vertical!important}.u-line-2[data-v-3d5665d5]{display:-webkit-box!important;overflow:hidden;text-overflow:ellipsis;word-break:break-all;-webkit-line-clamp:2;-webkit-box-orient:vertical!important}.u-line-3[data-v-3d5665d5]{display:-webkit-box!important;overflow:hidden;text-overflow:ellipsis;word-break:break-all;-webkit-line-clamp:3;-webkit-box-orient:vertical!important}.u-line-4[data-v-3d5665d5]{display:-webkit-box!important;overflow:hidden;text-overflow:ellipsis;word-break:break-all;-webkit-line-clamp:4;-webkit-box-orient:vertical!important}.u-line-5[data-v-3d5665d5]{display:-webkit-box!important;overflow:hidden;text-overflow:ellipsis;word-break:break-all;-webkit-line-clamp:5;-webkit-box-orient:vertical!important}.u-border[data-v-3d5665d5]{border-width:.5px!important;border-color:#dadbde!important;border-style:solid}.u-border-top[data-v-3d5665d5]{border-top-width:.5px!important;border-color:#dadbde!important;border-top-style:solid}.u-border-left[data-v-3d5665d5]{border-left-width:.5px!important;border-color:#dadbde!important;border-left-style:solid}.u-border-right[data-v-3d5665d5]{border-right-width:.5px!important;border-color:#dadbde!important;border-right-style:solid}.u-border-bottom[data-v-3d5665d5]{border-bottom-width:.5px!important;border-color:#dadbde!important;border-bottom-style:solid}.u-border-top-bottom[data-v-3d5665d5]{border-top-width:.5px!important;border-bottom-width:.5px!important;border-color:#dadbde!important;border-top-style:solid;border-bottom-style:solid}.u-reset-button[data-v-3d5665d5]{padding:0;background-color:initial;font-size:inherit;line-height:inherit;color:inherit}.u-reset-button[data-v-3d5665d5]::after{border:none}.u-hover-class[data-v-3d5665d5]{opacity:.7}.u-primary-light[data-v-3d5665d5]{color:#ecf5ff}.u-warning-light[data-v-3d5665d5]{color:#fdf6ec}.u-success-light[data-v-3d5665d5]{color:#f5fff0}.u-error-light[data-v-3d5665d5]{color:#fef0f0}.u-info-light[data-v-3d5665d5]{color:#f4f4f5}.u-primary-light-bg[data-v-3d5665d5]{background-color:#ecf5ff}.u-warning-light-bg[data-v-3d5665d5]{background-color:#fdf6ec}.u-success-light-bg[data-v-3d5665d5]{background-color:#f5fff0}.u-error-light-bg[data-v-3d5665d5]{background-color:#fef0f0}.u-info-light-bg[data-v-3d5665d5]{background-color:#f4f4f5}.u-primary-dark[data-v-3d5665d5]{color:#398ade}.u-warning-dark[data-v-3d5665d5]{color:#f1a532}.u-success-dark[data-v-3d5665d5]{color:#53c21d}.u-error-dark[data-v-3d5665d5]{color:#e45656}.u-info-dark[data-v-3d5665d5]{color:#767a82}.u-primary-dark-bg[data-v-3d5665d5]{background-color:#398ade}.u-warning-dark-bg[data-v-3d5665d5]{background-color:#f1a532}.u-success-dark-bg[data-v-3d5665d5]{background-color:#53c21d}.u-error-dark-bg[data-v-3d5665d5]{background-color:#e45656}.u-info-dark-bg[data-v-3d5665d5]{background-color:#767a82}.u-primary-disabled[data-v-3d5665d5]{color:#9acafc}.u-warning-disabled[data-v-3d5665d5]{color:#f9d39b}.u-success-disabled[data-v-3d5665d5]{color:#a9e08f}.u-error-disabled[data-v-3d5665d5]{color:#f7b2b2}.u-info-disabled[data-v-3d5665d5]{color:#c4c6c9}.u-primary[data-v-3d5665d5]{color:#6e83e9}.u-warning[data-v-3d5665d5]{color:#f9ae3d}.u-success[data-v-3d5665d5]{color:#5ac725}.u-error[data-v-3d5665d5]{color:#f56c6c}.u-info[data-v-3d5665d5]{color:#909399}.u-primary-bg[data-v-3d5665d5]{background-color:#6e83e9}.u-warning-bg[data-v-3d5665d5]{background-color:#f9ae3d}.u-success-bg[data-v-3d5665d5]{background-color:#5ac725}.u-error-bg[data-v-3d5665d5]{background-color:#f56c6c}.u-info-bg[data-v-3d5665d5]{background-color:#909399}.u-main-color[data-v-3d5665d5]{color:#303133}.u-content-color[data-v-3d5665d5]{color:#606266}.u-tips-color[data-v-3d5665d5]{color:#909193}.u-light-color[data-v-3d5665d5]{color:#c0c4cc}.u-safe-area-inset-top[data-v-3d5665d5]{padding-top:0;padding-top:constant(safe-area-inset-top);padding-top:env(safe-area-inset-top)}.u-safe-area-inset-right[data-v-3d5665d5]{padding-right:0;padding-right:constant(safe-area-inset-right);padding-right:env(safe-area-inset-right)}.u-safe-area-inset-bottom[data-v-3d5665d5]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.u-safe-area-inset-left[data-v-3d5665d5]{padding-left:0;padding-left:constant(safe-area-inset-left);padding-left:env(safe-area-inset-left)}uni-toast[data-v-3d5665d5]{z-index:10090}uni-toast .uni-toast[data-v-3d5665d5]{z-index:10090}[data-v-3d5665d5]::-webkit-scrollbar{display:none;width:0!important;height:0!important;-webkit-appearance:none;background:transparent}\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.contentmessage[data-v-3d5665d5]{padding:%?10?% %?0?%;padding-bottom:%?20?%}.contentmessage .Treasurebox[data-v-3d5665d5]{width:%?380?%;border-radius:%?20?%;background-color:#fd8e17;height:%?140?%}.contentmessage .Treasurebox .top[data-v-3d5665d5]{display:flex;align-items:center;height:%?100?%;justify-content:left}.contentmessage .Treasurebox .top .rightred[data-v-3d5665d5]{text-align:left;overflow:hidden;width:%?280?%;color:#fff;margin-left:%?10?%}.contentmessage .Treasurebox .top uni-image[data-v-3d5665d5]{width:%?60?%;height:%?60?%;margin-left:%?20?%}.contentmessage .chatleftBox[data-v-3d5665d5]{display:flex;align-items:center;height:%?60?%;margin-left:%?10?%;width:%?20?%}.contentmessage .chatleftBox .chatleft[data-v-3d5665d5]{width:%?20?%;height:%?30?%}.contentmessage .headImage[data-v-3d5665d5]{width:%?60?%;height:%?60?%}.contentmessage .message[data-v-3d5665d5]{background-color:#fff;padding:%?20?%;border-radius:%?20?%;min-width:0;max-width:70%;word-break:break-all;margin-left:%?-5?%}.contentmessage .left[data-v-3d5665d5]{display:flex;justify-content:left;margin-top:%?20?%}.contentmessage .right[data-v-3d5665d5]{display:flex;justify-content:right;margin-top:%?20?%}.rightRecord[data-v-3d5665d5]{position:fixed;top:%?20?%;right:%?20?%;z-index:1011}.Recordimage[data-v-3d5665d5]{width:%?55?%;height:%?55?%}.sumbitInput[data-v-3d5665d5]{background-color:hsla(0,0%,97.3%,.95);bottom:%?0?%;width:100%}.sumbitInput .sumbitInputItem[data-v-3d5665d5]{height:%?100?%;display:flex;justify-content:left;padding:%?10?% %?20?%}.sumbitInput .sumbitInputItem uni-image[data-v-3d5665d5]{width:%?70?%;height:%?70?%}.sumbitInput .sumbitInputItem .inputitemBox[data-v-3d5665d5]{background-color:#fff;width:%?540?%;height:%?70?%;margin-left:%?20?%;border-radius:%?35?%;display:flex;align-items:center}.sumbitInput .sumbitInputItem .inputitemBox uni-input[data-v-3d5665d5]{margin-left:%?20?%}.sumbitInput .sumbitInputItem .right[data-v-3d5665d5]{background-color:#95ec69;width:%?70?%;height:%?70?%;border-radius:50%;margin-left:%?10?%;text-align:center}.sumbitInput .sumbitInputItem .right uni-image[data-v-3d5665d5]{width:%?40?%;height:%?40?%;margin-top:%?15?%}.mainIndex[data-v-3d5665d5]{height:100%;display:flex;flex-flow:column}.mainIndex .content[data-v-3d5665d5]{flex:1;overflow-y:auto;padding:0 %?20?%;box-sizing:border-box}',""]),t.exports=e},"970b":function(t,e,n){n("d9e2"),n("d401"),t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports["default"]=t.exports},"9f70":function(t,e,n){var i=n("36c6");t.exports=function(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=i(t),null===t)break;return t},t.exports.__esModule=!0,t.exports["default"]=t.exports},a128:function(t,e,n){n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("d9e2"),n("d401");var i=n("36c6"),r=n("4a4b"),o=n("c5f7"),s=n("b17c");function a(e){var n="function"===typeof Map?new Map:void 0;return t.exports=a=function(t){if(null===t||!o(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return s(t,arguments,i(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r(e,t)},t.exports.__esModule=!0,t.exports["default"]=t.exports,a(e)}t.exports=a,t.exports.__esModule=!0,t.exports["default"]=t.exports},a395:function(t,e,n){var i=n("7037")["default"],r=n("e50d");t.exports=function(t){var e=r(t,"string");return"symbol"===i(e)?e:String(e)},t.exports.__esModule=!0,t.exports["default"]=t.exports},b17c:function(t,e,n){n("4ae1"),n("d3b7"),n("f8c9"),n("14d9");var i=n("4a4b"),r=n("6f8f");function o(e,n,s){return r()?(t.exports=o=Reflect.construct.bind(),t.exports.__esModule=!0,t.exports["default"]=t.exports):(t.exports=o=function(t,e,n){var r=[null];r.push.apply(r,e);var o=Function.bind.apply(t,r),s=new o;return n&&i(s,n.prototype),s},t.exports.__esModule=!0,t.exports["default"]=t.exports),o.apply(null,arguments)}t.exports=o,t.exports.__esModule=!0,t.exports["default"]=t.exports},b2b2:function(t,e,n){(function(t){var i,r,o,s=n("7ec2").default,a=n("8962").default,c=n("36c6").default,u=n("3c96").default,l=n("ed6d").default,h=n("2d0d").default,d=n("a128").default,f=n("970b").default,p=n("5bc3").default,v=n("7037").default;n("7a82"),n("a4d3"),n("e01a"),n("d3b7"),n("944a"),n("0c47"),n("23dc"),n("131a"),n("ace4"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("986a"),n("1d02"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("b39a"),n("72f7"),n("d9e2"),n("d401"),n("14d9"),n("ac1f"),n("5319"),n("99af"),n("25f0"),n("0eb6"),n("b7ef"),n("8bd4"),n("fb6a"),n("c975"),n("e9c4"),n("00b4"),n("fb2c"),n("159b"),n("7db0"),
/*!
 * Pusher JavaScript Library v8.2.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */
function(n,s){"object"===v(e)&&"object"===v(t)?t.exports=s():(r=[],i=s,o="function"===typeof i?i.apply(e,r):i,void 0===o||(t.exports=o))}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===v(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){void 0===t&&(t="="),this._paddingCharacter=t}return t.prototype.encodedLength=function(t){return this._paddingCharacter?(t+2)/3*4|0:(8*t+5)/6|0},t.prototype.encode=function(t){for(var e="",n=0;n<t.length-2;n+=3){var i=t[n]<<16|t[n+1]<<8|t[n+2];e+=this._encodeByte(i>>>18&63),e+=this._encodeByte(i>>>12&63),e+=this._encodeByte(i>>>6&63),e+=this._encodeByte(i>>>0&63)}var r=t.length-n;if(r>0){i=t[n]<<16|(2===r?t[n+1]<<8:0);e+=this._encodeByte(i>>>18&63),e+=this._encodeByte(i>>>12&63),e+=2===r?this._encodeByte(i>>>6&63):this._paddingCharacter||"",e+=this._paddingCharacter||""}return e},t.prototype.maxDecodedLength=function(t){return this._paddingCharacter?t/4*3|0:(6*t+7)/8|0},t.prototype.decodedLength=function(t){return this.maxDecodedLength(t.length-this._getPaddingLength(t))},t.prototype.decode=function(t){if(0===t.length)return new Uint8Array(0);for(var e=this._getPaddingLength(t),n=t.length-e,i=new Uint8Array(this.maxDecodedLength(n)),r=0,o=0,s=0,a=0,c=0,u=0,l=0;o<n-4;o+=4)a=this._decodeChar(t.charCodeAt(o+0)),c=this._decodeChar(t.charCodeAt(o+1)),u=this._decodeChar(t.charCodeAt(o+2)),l=this._decodeChar(t.charCodeAt(o+3)),i[r++]=a<<2|c>>>4,i[r++]=c<<4|u>>>2,i[r++]=u<<6|l,s|=256&a,s|=256&c,s|=256&u,s|=256&l;if(o<n-1&&(a=this._decodeChar(t.charCodeAt(o)),c=this._decodeChar(t.charCodeAt(o+1)),i[r++]=a<<2|c>>>4,s|=256&a,s|=256&c),o<n-2&&(u=this._decodeChar(t.charCodeAt(o+2)),i[r++]=c<<4|u>>>2,s|=256&u),o<n-3&&(l=this._decodeChar(t.charCodeAt(o+3)),i[r++]=u<<6|l,s|=256&l),0!==s)throw new Error("Base64Coder: incorrect characters for decoding");return i},t.prototype._encodeByte=function(t){var e=t;return e+=65,e+=25-t>>>8&6,e+=51-t>>>8&-75,e+=61-t>>>8&-15,e+=62-t>>>8&3,String.fromCharCode(e)},t.prototype._decodeChar=function(t){var e=256;return e+=(42-t&t-44)>>>8&-256+t-43+62,e+=(46-t&t-48)>>>8&-256+t-47+63,e+=(47-t&t-58)>>>8&-256+t-48+52,e+=(64-t&t-91)>>>8&-256+t-65+0,e+=(96-t&t-123)>>>8&-256+t-97+26,e},t.prototype._getPaddingLength=function(t){var e=0;if(this._paddingCharacter){for(var n=t.length-1;n>=0;n--){if(t[n]!==this._paddingCharacter)break;e++}if(t.length<4||e>2)throw new Error("Base64Coder: incorrect padding")}return e},t}();e.Coder=r;var o=new r;e.encode=function(t){return o.encode(t)},e.decode=function(t){return o.decode(t)};var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._encodeByte=function(t){var e=t;return e+=65,e+=25-t>>>8&6,e+=51-t>>>8&-75,e+=61-t>>>8&-13,e+=62-t>>>8&49,String.fromCharCode(e)},e.prototype._decodeChar=function(t){var e=256;return e+=(44-t&t-46)>>>8&-256+t-45+62,e+=(94-t&t-96)>>>8&-256+t-95+63,e+=(47-t&t-58)>>>8&-256+t-48+52,e+=(64-t&t-91)>>>8&-256+t-65+0,e+=(96-t&t-123)>>>8&-256+t-97+26,e},e}(r);e.URLSafeCoder=s;var a=new s;e.encodeURLSafe=function(t){return a.encode(t)},e.decodeURLSafe=function(t){return a.decode(t)},e.encodedLength=function(t){return o.encodedLength(t)},e.maxDecodedLength=function(t){return o.maxDecodedLength(t)},e.decodedLength=function(t){return o.decodedLength(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="utf8: invalid source encoding";function r(t){for(var e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);if(i<128)e+=1;else if(i<2048)e+=2;else if(i<55296)e+=3;else{if(!(i<=57343))throw new Error("utf8: invalid string");if(n>=t.length-1)throw new Error("utf8: invalid string");n++,e+=4}}return e}e.encode=function(t){for(var e=new Uint8Array(r(t)),n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=192|o>>6,e[n++]=128|63&o):o<55296?(e[n++]=224|o>>12,e[n++]=128|o>>6&63,e[n++]=128|63&o):(i++,o=(1023&o)<<10,o|=1023&t.charCodeAt(i),o+=65536,e[n++]=240|o>>18,e[n++]=128|o>>12&63,e[n++]=128|o>>6&63,e[n++]=128|63&o)}return e},e.encodedLength=r,e.decode=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(128&r){var o=void 0;if(r<224){if(n>=t.length)throw new Error(i);var s=t[++n];if(128!==(192&s))throw new Error(i);r=(31&r)<<6|63&s,o=128}else if(r<240){if(n>=t.length-1)throw new Error(i);s=t[++n];var a=t[++n];if(128!==(192&s)||128!==(192&a))throw new Error(i);r=(15&r)<<12|(63&s)<<6|63&a,o=2048}else{if(!(r<248))throw new Error(i);if(n>=t.length-2)throw new Error(i);s=t[++n],a=t[++n];var c=t[++n];if(128!==(192&s)||128!==(192&a)||128!==(192&c))throw new Error(i);r=(15&r)<<18|(63&s)<<12|(63&a)<<6|63&c,o=65536}if(r<o||r>=55296&&r<=57343)throw new Error(i);if(r>=65536){if(r>1114111)throw new Error(i);r-=65536,e.push(String.fromCharCode(55296|r>>10)),r=56320|1023&r}}e.push(String.fromCharCode(r))}return e.join("")}},function(t,e,n){t.exports=n(3).default},function(t,e,n){"use strict";n.r(e);var i,r=function(){function t(e,n){f(this,t),this.lastId=0,this.prefix=e,this.name=n}return p(t,[{key:"create",value:function(t){this.lastId++;var e=this.lastId,n=this.prefix+e,i=this.name+"["+e+"]",r=!1,o=function(){r||(t.apply(null,arguments),r=!0)};return this[e]=o,{number:e,id:n,name:i,callback:o}}},{key:"remove",value:function(t){delete this[t.number]}}]),t}(),o=new r("_pusher_script_","Pusher.ScriptReceivers"),g={VERSION:"8.2.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},y=function(){function t(e){f(this,t),this.options=e,this.receivers=e.receivers||o,this.loading={}}return p(t,[{key:"load",value:function(t,e,n){var i=this;if(i.loading[t]&&i.loading[t].length>0)i.loading[t].push(n);else{i.loading[t]=[n];var r=De.createScriptRequest(i.getPath(t,e)),o=i.receivers.create((function(e){if(i.receivers.remove(o),i.loading[t]){var n=i.loading[t];delete i.loading[t];for(var s=function(t){t||r.cleanup()},a=0;a<n.length;a++)n[a](e,s)}}));r.send(o)}}},{key:"getRoot",value:function(t){var e,n=De.getDocument().location.protocol;return e=t&&t.useTLS||"https:"===n?this.options.cdn_https:this.options.cdn_http,e.replace(/\/*$/,"")+"/"+this.options.version}},{key:"getPath",value:function(t,e){return this.getRoot(e)+"/"+t+this.options.suffix+".js"}}]),t}(),b=new r("_pusher_dependencies","Pusher.DependenciesReceivers"),m=new y({cdn_http:g.cdn_http,cdn_https:g.cdn_https,version:g.VERSION,suffix:g.dependency_suffix,receivers:b}),k={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},w={buildLogSuffix:function(t){var e,n=k.urls[t];return n?(n.fullUrl?e=n.fullUrl:n.path&&(e=k.baseUrl+n.path),e?"".concat("See:"," ").concat(e):""):""}};(function(t){t["UserAuthentication"]="user-authentication",t["ChannelAuthorization"]="channel-authorization"})(i||(i={}));var _=function(t){l(n,t);var e=h(n);function n(t){var i;return f(this,n),i=e.call(this,t),Object.setPrototypeOf(u(i),(this instanceof n?this.constructor:void 0).prototype),i}return p(n)}(d(Error)),x=function(t){l(n,t);var e=h(n);function n(t){var i;return f(this,n),i=e.call(this,t),Object.setPrototypeOf(u(i),(this instanceof n?this.constructor:void 0).prototype),i}return p(n)}(d(Error)),S=function(t){l(n,t);var e=h(n);function n(t){var i;return f(this,n),i=e.call(this,t),Object.setPrototypeOf(u(i),(this instanceof n?this.constructor:void 0).prototype),i}return p(n)}(d(Error)),C=function(t){l(n,t);var e=h(n);function n(t){var i;return f(this,n),i=e.call(this,t),Object.setPrototypeOf(u(i),(this instanceof n?this.constructor:void 0).prototype),i}return p(n)}(d(Error)),T=function(t){l(n,t);var e=h(n);function n(t){var i;return f(this,n),i=e.call(this,t),Object.setPrototypeOf(u(i),(this instanceof n?this.constructor:void 0).prototype),i}return p(n)}(d(Error)),P=function(t){l(n,t);var e=h(n);function n(t){var i;return f(this,n),i=e.call(this,t),Object.setPrototypeOf(u(i),(this instanceof n?this.constructor:void 0).prototype),i}return p(n)}(d(Error)),O=function(t){l(n,t);var e=h(n);function n(t){var i;return f(this,n),i=e.call(this,t),Object.setPrototypeOf(u(i),(this instanceof n?this.constructor:void 0).prototype),i}return p(n)}(d(Error)),E=function(t){l(n,t);var e=h(n);function n(t){var i;return f(this,n),i=e.call(this,t),Object.setPrototypeOf(u(i),(this instanceof n?this.constructor:void 0).prototype),i}return p(n)}(d(Error)),L=function(t){l(n,t);var e=h(n);function n(t,i){var r;return f(this,n),r=e.call(this,i),r.status=t,Object.setPrototypeOf(u(r),(this instanceof n?this.constructor:void 0).prototype),r}return p(n)}(d(Error)),I=function(t,e,n,r,o){var s=De.createXHR();for(var a in s.open("POST",n.endpoint,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.headers)s.setRequestHeader(a,n.headers[a]);if(null!=n.headersProvider){var c=n.headersProvider();for(var a in c)s.setRequestHeader(a,c[a])}return s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){var t,e=!1;try{t=JSON.parse(s.responseText),e=!0}catch(c){o(new L(200,"JSON returned from ".concat(r.toString()," endpoint was invalid, yet status code was 200. Data was: ").concat(s.responseText)),null)}e&&o(null,t)}else{var a="";switch(r){case i.UserAuthentication:a=w.buildLogSuffix("authenticationEndpoint");break;case i.ChannelAuthorization:a="Clients must be authorized to join private or presence channels. ".concat(w.buildLogSuffix("authorizationEndpoint"));break}o(new L(s.status,"Unable to retrieve auth string from ".concat(r.toString()," endpoint - ")+"received status: ".concat(s.status," from ").concat(n.endpoint,". ").concat(a)),null)}},s.send(e),s};for(var j=String.fromCharCode,R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A={},M=0,D=R.length;M<D;M++)A[R.charAt(M)]=M;var N=function(t){var e=t.charCodeAt(0);return e<128?t:e<2048?j(192|e>>>6)+j(128|63&e):j(224|e>>>12&15)+j(128|e>>>6&63)+j(128|63&e)},H=function(t){return t.replace(/[^\x00-\x7F]/g,N)},z=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),i=[R.charAt(n>>>18),R.charAt(n>>>12&63),e>=2?"=":R.charAt(n>>>6&63),e>=1?"=":R.charAt(63&n)];return i.join("")},U=window.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,z)},B=function(){function t(e,n,i,r){var o=this;f(this,t),this.clear=n,this.timer=e((function(){o.timer&&(o.timer=r(o.timer))}),i)}return p(t,[{key:"isRunning",value:function(){return null!==this.timer}},{key:"ensureAborted",value:function(){this.timer&&(this.clear(this.timer),this.timer=null)}}]),t}(),q=B;function F(t){window.clearTimeout(t)}function X(t){window.clearInterval(t)}var J=function(t){l(n,t);var e=h(n);function n(t,i){return f(this,n),e.call(this,setTimeout,F,t,(function(t){return i(),null}))}return p(n)}(q),W=function(t){l(n,t);var e=h(n);function n(t,i){return f(this,n),e.call(this,setInterval,X,t,(function(t){return i(),t}))}return p(n)}(q),$={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(t){return new J(0,t)},method:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=Array.prototype.slice.call(arguments,1);return function(e){return e[t].apply(e,r.concat(arguments))}}},G=$;function V(t){for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e++){var n=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];for(var i in n)n[i]&&n[i].constructor&&n[i].constructor===Object?t[i]=V(t[i]||{},n[i]):t[i]=n[i]}return t}function Q(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"===typeof arguments[e]?t.push(arguments[e]):t.push(at(arguments[e]));return t.join(" : ")}function Y(t,e){var n=Array.prototype.indexOf;if(null===t)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}function K(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function Z(t){var e=[];return K(t,(function(t,n){e.push(n)})),e}function tt(t,e,n){for(var i=0;i<t.length;i++)e.call(n||window,t[i],i,t)}function et(t,e){for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i,t,n));return n}function nt(t,e){e=e||function(t){return!!t};for(var n=[],i=0;i<t.length;i++)e(t[i],i,t,n)&&n.push(t[i]);return n}function it(t,e){var n={};return K(t,(function(i,r){(e&&e(i,r,t,n)||Boolean(i))&&(n[r]=i)})),n}function rt(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1}function ot(t){return function(t,e){var n={};return K(t,(function(t,i){n[i]=e(t)})),n}(t,(function(t){return"object"===v(t)&&(t=at(t)),encodeURIComponent(function(t){return U(H(t))}(t.toString()))}))}function st(t){var e=it(t,(function(t){return void 0!==t})),n=et(function(t){var e=[];return K(t,(function(t,n){e.push([n,t])})),e}(ot(e)),G.method("join","=")).join("&");return n}function at(t){try{return JSON.stringify(t)}catch(e){return JSON.stringify(function(t){var e=[],n=[];return function t(i,r){var o,s,a;switch(v(i)){case"object":if(!i)return null;for(o=0;o<e.length;o+=1)if(e[o]===i)return{$ref:n[o]};if(e.push(i),n.push(r),"[object Array]"===Object.prototype.toString.apply(i))for(a=[],o=0;o<i.length;o+=1)a[o]=t(i[o],r+"["+o+"]");else for(s in a={},i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=t(i[s],r+"["+JSON.stringify(s)+"]"));return a;case"number":case"string":case"boolean":return i}}(t,"$")}(t))}}var ct=function(){function t(){f(this,t),this.globalLog=function(t){window.console&&window.console.log&&window.console.log(t)}}return p(t,[{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log(this.globalLog,e)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log(this.globalLogWarn,e)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log(this.globalLogError,e)}},{key:"globalLogWarn",value:function(t){window.console&&window.console.warn?window.console.warn(t):this.globalLog(t)}},{key:"globalLogError",value:function(t){window.console&&window.console.error?window.console.error(t):this.globalLogWarn(t)}},{key:"log",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=Q.apply(this,arguments);if(nn.log)nn.log(r);else if(nn.logToConsole){var o=t.bind(this);o(r)}}}]),t}(),ut=new ct,lt=function(t,e,n,i,r){void 0===n.headers&&null==n.headersProvider||ut.warn("To send headers with the ".concat(i.toString()," request, you must use AJAX, rather than JSONP."));var o=t.nextAuthCallbackID.toString();t.nextAuthCallbackID++;var s=t.getDocument(),a=s.createElement("script");t.auth_callbacks[o]=function(t){r(null,t)};var c="Pusher.auth_callbacks['"+o+"']";a.src=n.endpoint+"?callback="+encodeURIComponent(c)+"&"+e;var u=s.getElementsByTagName("head")[0]||s.documentElement;u.insertBefore(a,u.firstChild)},ht=function(){function t(e){f(this,t),this.src=e}return p(t,[{key:"send",value:function(t){var e=this,n="Error loading "+e.src;e.script=document.createElement("script"),e.script.id=t.id,e.script.src=e.src,e.script.type="text/javascript",e.script.charset="UTF-8",e.script.addEventListener?(e.script.onerror=function(){t.callback(n)},e.script.onload=function(){t.callback(null)}):e.script.onreadystatechange=function(){"loaded"!==e.script.readyState&&"complete"!==e.script.readyState||t.callback(null)},void 0===e.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(e.errorScript=document.createElement("script"),e.errorScript.id=t.id+"_error",e.errorScript.text=t.name+"('"+n+"');",e.script.async=e.errorScript.async=!1):e.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(e.script,i.firstChild),e.errorScript&&i.insertBefore(e.errorScript,e.script.nextSibling)}},{key:"cleanup",value:function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}]),t}(),dt=function(){function t(e,n){f(this,t),this.url=e,this.data=n}return p(t,[{key:"send",value:function(t){if(!this.request){var e=st(this.data),n=this.url+"/"+t.number+"?"+e;this.request=De.createScriptRequest(n),this.request.send(t)}}},{key:"cleanup",value:function(){this.request&&this.request.cleanup()}}]),t}(),ft={name:"jsonp",getAgent:function(t,e){return function(n,i){var r="http"+(e?"s":"")+"://",s=r+(t.host||t.options.host)+t.options.path,a=De.createJSONPRequest(s,n),c=De.ScriptReceivers.create((function(e,n){o.remove(c),a.cleanup(),n&&n.host&&(t.host=n.host),i&&i(e,n)}));a.send(c)}}},pt=ft;function vt(t,e,n){var i=t+(e.useTLS?"s":""),r=e.useTLS?e.hostTLS:e.hostNonTLS;return i+"://"+r+n}function gt(t,e){var n="/app/"+t,i="?protocol="+g.PROTOCOL+"&client=js&version="+g.VERSION+(e?"&"+e:"");return n+i}var yt={getInitial:function(t,e){var n=(e.httpPath||"")+gt(t,"flash=false");return vt("ws",e,n)}},bt={getInitial:function(t,e){var n=(e.httpPath||"/pusher")+gt(t);return vt("http",e,n)}},mt={getInitial:function(t,e){return vt("http",e,e.httpPath||"/pusher")},getPath:function(t,e){return gt(t)}},kt=function(){function t(){f(this,t),this._callbacks={}}return p(t,[{key:"get",value:function(t){return this._callbacks[wt(t)]}},{key:"add",value:function(t,e,n){var i=wt(t);this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:e,context:n})}},{key:"remove",value:function(t,e,n){if(t||e||n){var i=t?[wt(t)]:Z(this._callbacks);e||n?this.removeCallback(i,e,n):this.removeAllCallbacks(i)}else this._callbacks={}}},{key:"removeCallback",value:function(t,e,n){tt(t,(function(t){this._callbacks[t]=nt(this._callbacks[t]||[],(function(t){return e&&e!==t.fn||n&&n!==t.context})),0===this._callbacks[t].length&&delete this._callbacks[t]}),this)}},{key:"removeAllCallbacks",value:function(t){tt(t,(function(t){delete this._callbacks[t]}),this)}}]),t}();function wt(t){return"_"+t}var _t=function(){function t(e){f(this,t),this.callbacks=new kt,this.global_callbacks=[],this.failThrough=e}return p(t,[{key:"bind",value:function(t,e,n){return this.callbacks.add(t,e,n),this}},{key:"bind_global",value:function(t){return this.global_callbacks.push(t),this}},{key:"unbind",value:function(t,e,n){return this.callbacks.remove(t,e,n),this}},{key:"unbind_global",value:function(t){return t?(this.global_callbacks=nt(this.global_callbacks||[],(function(e){return e!==t})),this):(this.global_callbacks=[],this)}},{key:"unbind_all",value:function(){return this.unbind(),this.unbind_global(),this}},{key:"emit",value:function(t,e,n){for(var i=0;i<this.global_callbacks.length;i++)this.global_callbacks[i](t,e);var r=this.callbacks.get(t),o=[];if(n?o.push(e,n):e&&o.push(e),r&&r.length>0)for(i=0;i<r.length;i++)r[i].fn.apply(r[i].context||window,o);else this.failThrough&&this.failThrough(t,e);return this}}]),t}(),xt=function(t){l(n,t);var e=h(n);function n(t,i,r,o,s){var a;return f(this,n),a=e.call(this),a.initialize=De.transportConnectionInitializer,a.hooks=t,a.name=i,a.priority=r,a.key=o,a.options=s,a.state="new",a.timeline=s.timeline,a.activityTimeout=s.activityTimeout,a.id=a.timeline.generateUniqueID(),a}return p(n,[{key:"handlesActivityChecks",value:function(){return Boolean(this.hooks.handlesActivityChecks)}},{key:"supportsPing",value:function(){return Boolean(this.hooks.supportsPing)}},{key:"connect",value:function(){var t=this;if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(n){return G.defer((function(){t.onError(n),t.changeState("closed")})),!1}return this.bindListeners(),ut.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0}},{key:"close",value:function(){return!!this.socket&&(this.socket.close(),!0)}},{key:"send",value:function(t){var e=this;return"open"===this.state&&(G.defer((function(){e.socket&&e.socket.send(t)})),!0)}},{key:"ping",value:function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()}},{key:"onOpen",value:function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}},{key:"onError",value:function(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({error:t.toString()}))}},{key:"onClose",value:function(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}},{key:"onMessage",value:function(t){this.emit("message",t)}},{key:"onActivity",value:function(){this.emit("activity")}},{key:"bindListeners",value:function(){var t=this;this.socket.onopen=function(){t.onOpen()},this.socket.onerror=function(e){t.onError(e)},this.socket.onclose=function(e){t.onClose(e)},this.socket.onmessage=function(e){t.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=function(){t.onActivity()})}},{key:"unbindListeners",value:function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}},{key:"changeState",value:function(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)}},{key:"buildTimelineMessage",value:function(t){return V({cid:this.id},t)}}]),n}(_t),St=function(){function t(e){f(this,t),this.hooks=e}return p(t,[{key:"isSupported",value:function(t){return this.hooks.isSupported(t)}},{key:"createConnection",value:function(t,e,n,i){return new xt(this.hooks,t,e,n,i)}}]),t}(),Ct=new St({urls:yt,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(De.getWebSocketAPI())},isSupported:function(){return Boolean(De.getWebSocketAPI())},getSocket:function(t){return De.createWebSocket(t)}}),Tt={urls:bt,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Pt=V({getSocket:function(t){return De.HTTPFactory.createStreamingSocket(t)}},Tt),Ot=V({getSocket:function(t){return De.HTTPFactory.createPollingSocket(t)}},Tt),Et={isSupported:function(){return De.isXHRSupported()}},Lt=new St(V({},Pt,Et)),It=new St(V({},Ot,Et)),jt={ws:Ct,xhr_streaming:Lt,xhr_polling:It},Rt=jt,At=new St({file:"sockjs",urls:mt,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(t,e){return new window.SockJS(t,null,{js_path:m.getPath("sockjs",{useTLS:e.useTLS}),ignore_null_origin:e.ignoreNullOrigin})},beforeOpen:function(t,e){t.send(JSON.stringify({path:e}))}}),Mt={isSupported:function(t){var e=De.isXDRSupported(t.useTLS);return e}},Dt=new St(V({},Pt,Mt)),Nt=new St(V({},Ot,Mt));Rt.xdr_streaming=Dt,Rt.xdr_polling=Nt,Rt.sockjs=At;var Ht=Rt,zt=function(t){l(n,t);var e=h(n);function n(){var t;f(this,n),t=e.call(this);var i=u(t);return void 0!==window.addEventListener&&(window.addEventListener("online",(function(){i.emit("online")}),!1),window.addEventListener("offline",(function(){i.emit("offline")}),!1)),t}return p(n,[{key:"isOnline",value:function(){return void 0===window.navigator.onLine||window.navigator.onLine}}]),n}(_t),Ut=new zt,Bt=function(){function t(e,n,i){f(this,t),this.manager=e,this.transport=n,this.minPingDelay=i.minPingDelay,this.maxPingDelay=i.maxPingDelay,this.pingDelay=void 0}return p(t,[{key:"createConnection",value:function(t,e,n,i){var r=this;i=V({},i,{activityTimeout:this.pingDelay});var o=this.transport.createConnection(t,e,n,i),s=null,a=function t(e){if(o.unbind("closed",t),1002===e.code||1003===e.code)r.manager.reportDeath();else if(!e.wasClean&&s){var n=G.now()-s;n<2*r.maxPingDelay&&(r.manager.reportDeath(),r.pingDelay=Math.max(n/2,r.minPingDelay))}};return o.bind("open",(function t(){o.unbind("open",t),o.bind("closed",a),s=G.now()})),o}},{key:"isSupported",value:function(t){return this.manager.isAlive()&&this.transport.isSupported(t)}}]),t}(),qt={decodeMessage:function(t){try{var e=JSON.parse(t.data),n=e.data;if("string"===typeof n)try{n=JSON.parse(e.data)}catch(r){}var i={event:e.event,channel:e.channel,data:n};return e.user_id&&(i.user_id=e.user_id),i}catch(r){throw{type:"MessageParseError",error:r,data:t.data}}},encodeMessage:function(t){return JSON.stringify(t)},processHandshake:function(t){var e=qt.decodeMessage(t);if("pusher:connection_established"===e.event){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:1e3*e.data.activity_timeout}}if("pusher:error"===e.event)return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},getCloseAction:function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:4e3===t.code?"tls_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},getCloseError:function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},Ft=qt,Xt=function(t){l(n,t);var e=h(n);function n(t,i){var r;return f(this,n),r=e.call(this),r.id=t,r.transport=i,r.activityTimeout=i.activityTimeout,r.bindListeners(),r}return p(n,[{key:"handlesActivityChecks",value:function(){return this.transport.handlesActivityChecks()}},{key:"send",value:function(t){return this.transport.send(t)}},{key:"send_event",value:function(t,e,n){var i={event:t,data:e};return n&&(i.channel=n),ut.debug("Event sent",i),this.send(Ft.encodeMessage(i))}},{key:"ping",value:function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}},{key:"close",value:function(){this.transport.close()}},{key:"bindListeners",value:function(){var t=this,e={message:function(e){var n;try{n=Ft.decodeMessage(e)}catch(i){t.emit("error",{type:"MessageParseError",error:i,data:e.data})}if(void 0!==n){switch(ut.debug("Event recd",n),n.event){case"pusher:error":t.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":t.emit("ping");break;case"pusher:pong":t.emit("pong");break}t.emit("message",n)}},activity:function(){t.emit("activity")},error:function(e){t.emit("error",e)},closed:function(e){n(),e&&e.code&&t.handleCloseEvent(e),t.transport=null,t.emit("closed")}},n=function(){K(e,(function(e,n){t.transport.unbind(n,e)}))};K(e,(function(e,n){t.transport.bind(n,e)}))}},{key:"handleCloseEvent",value:function(t){var e=Ft.getCloseAction(t),n=Ft.getCloseError(t);n&&this.emit("error",n),e&&this.emit(e,{action:e,error:n})}}]),n}(_t),Jt=function(){function t(e,n){f(this,t),this.transport=e,this.callback=n,this.bindListeners()}return p(t,[{key:"close",value:function(){this.unbindListeners(),this.transport.close()}},{key:"bindListeners",value:function(){var t=this;this.onMessage=function(e){var n;t.unbindListeners();try{n=Ft.processHandshake(e)}catch(i){return t.finish("error",{error:i}),void t.transport.close()}"connected"===n.action?t.finish("connected",{connection:new Xt(n.id,t.transport),activityTimeout:n.activityTimeout}):(t.finish(n.action,{error:n.error}),t.transport.close())},this.onClosed=function(e){t.unbindListeners();var n=Ft.getCloseAction(e)||"backoff",i=Ft.getCloseError(e);t.finish(n,{error:i})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}},{key:"unbindListeners",value:function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}},{key:"finish",value:function(t,e){this.callback(V({transport:this.transport,action:t},e))}}]),t}(),Wt=function(){function t(e,n){f(this,t),this.timeline=e,this.options=n||{}}return p(t,[{key:"send",value:function(t,e){this.timeline.isEmpty()||this.timeline.send(De.TimelineTransport.getAgent(this,t),e)}}]),t}(),$t=function(t){l(n,t);var e=h(n);function n(t,i){var r;return f(this,n),r=e.call(this,(function(e,n){ut.debug("No callbacks on "+t+" for "+e)})),r.name=t,r.pusher=i,r.subscribed=!1,r.subscriptionPending=!1,r.subscriptionCancelled=!1,r}return p(n,[{key:"authorize",value:function(t,e){return e(null,{auth:""})}},{key:"trigger",value:function(t,e){if(0!==t.indexOf("client-"))throw new _("Event '"+t+"' does not start with 'client-'");if(!this.subscribed){var n=w.buildLogSuffix("triggeringClientEvents");ut.warn("Client event triggered before channel 'subscription_succeeded' event . ".concat(n))}return this.pusher.send_event(t,e,this.name)}},{key:"disconnect",value:function(){this.subscribed=!1,this.subscriptionPending=!1}},{key:"handleEvent",value:function(t){var e=t.event,n=t.data;if("pusher_internal:subscription_succeeded"===e)this.handleSubscriptionSucceededEvent(t);else if("pusher_internal:subscription_count"===e)this.handleSubscriptionCountEvent(t);else if(0!==e.indexOf("pusher_internal:")){this.emit(e,n,{})}}},{key:"handleSubscriptionSucceededEvent",value:function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",t.data)}},{key:"handleSubscriptionCountEvent",value:function(t){t.data.subscription_count&&(this.subscriptionCount=t.data.subscription_count),this.emit("pusher:subscription_count",t.data)}},{key:"subscribe",value:function(){var t=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(function(e,n){e?(t.subscriptionPending=!1,ut.error(e.toString()),t.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:e.message},e instanceof L?{status:e.status}:{}))):t.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:t.name})})))}},{key:"unsubscribe",value:function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}},{key:"cancelSubscription",value:function(){this.subscriptionCancelled=!0}},{key:"reinstateSubscription",value:function(){this.subscriptionCancelled=!1}}]),n}(_t),Gt=function(t){l(n,t);var e=h(n);function n(){return f(this,n),e.apply(this,arguments)}return p(n,[{key:"authorize",value:function(t,e){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:t},e)}}]),n}($t),Vt=function(){function t(){f(this,t),this.reset()}return p(t,[{key:"get",value:function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null}},{key:"each",value:function(t){var e=this;K(this.members,(function(n,i){t(e.get(i))}))}},{key:"setMyID",value:function(t){this.myID=t}},{key:"onSubscription",value:function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)}},{key:"addMember",value:function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)}},{key:"removeMember",value:function(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e}},{key:"reset",value:function(){this.members={},this.count=0,this.myID=null,this.me=null}}]),t}(),Qt=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(e){o(e)}}function a(t){try{c(i["throw"](t))}catch(e){o(e)}}function c(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(s,a)}c((i=i.apply(t,e||[])).next())}))},Yt=function(t){l(n,t);var e=h(n);function n(t,i){var r;return f(this,n),r=e.call(this,t,i),r.members=new Vt,r}return p(n,[{key:"authorize",value:function(t,e){var i=this;a(c(n.prototype),"authorize",this).call(this,t,(function(t,n){return Qt(i,void 0,void 0,s().mark((function i(){var r,o;return s().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t){i.next=17;break}if(n=n,null==n.channel_data){i.next=7;break}r=JSON.parse(n.channel_data),this.members.setMyID(r.user_id),i.next=17;break;case 7:return i.next=9,this.pusher.user.signinDonePromise;case 9:if(null==this.pusher.user.user_data){i.next=13;break}this.members.setMyID(this.pusher.user.user_data.id),i.next=17;break;case 13:return o=w.buildLogSuffix("authorizationEndpoint"),ut.error("Invalid auth response for channel '".concat(this.name,"', ")+"expected 'channel_data' field. ".concat(o,", ")+"or the user should be signed in."),e("Invalid auth response"),i.abrupt("return");case 17:e(t,n);case 18:case"end":return i.stop()}}),i,this)})))}))}},{key:"handleEvent",value:function(t){var e=t.event;if(0===e.indexOf("pusher_internal:"))this.handleInternalEvent(t);else{var n=t.data,i={};t.user_id&&(i.user_id=t.user_id),this.emit(e,n,i)}}},{key:"handleInternalEvent",value:function(t){var e=t.event,n=t.data;switch(e){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(t);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(t);break;case"pusher_internal:member_added":var i=this.members.addMember(n);this.emit("pusher:member_added",i);break;case"pusher_internal:member_removed":var r=this.members.removeMember(n);r&&this.emit("pusher:member_removed",r);break}}},{key:"handleSubscriptionSucceededEvent",value:function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(t.data),this.emit("pusher:subscription_succeeded",this.members))}},{key:"disconnect",value:function(){this.members.reset(),a(c(n.prototype),"disconnect",this).call(this)}}]),n}(Gt),Kt=n(1),Zt=n(0),te=function(t){l(n,t);var e=h(n);function n(t,i,r){var o;return f(this,n),o=e.call(this,t,i),o.key=null,o.nacl=r,o}return p(n,[{key:"authorize",value:function(t,e){var i=this;a(c(n.prototype),"authorize",this).call(this,t,(function(t,n){if(t)e(t,n);else{var r=n["shared_secret"];r?(i.key=Object(Zt["decode"])(r),delete n["shared_secret"],e(null,n)):e(new Error("No shared_secret key in auth payload for encrypted channel: ".concat(i.name)),null)}}))}},{key:"trigger",value:function(t,e){throw new P("Client events are not currently supported for encrypted channels")}},{key:"handleEvent",value:function(t){var e=t.event,i=t.data;0!==e.indexOf("pusher_internal:")&&0!==e.indexOf("pusher:")?this.handleEncryptedEvent(e,i):a(c(n.prototype),"handleEvent",this).call(this,t)}},{key:"handleEncryptedEvent",value:function(t,e){var n=this;if(this.key)if(e.ciphertext&&e.nonce){var i=Object(Zt["decode"])(e.ciphertext);if(i.length<this.nacl.secretbox.overheadLength)ut.error("Expected encrypted event ciphertext length to be ".concat(this.nacl.secretbox.overheadLength,", got: ").concat(i.length));else{var r=Object(Zt["decode"])(e.nonce);if(r.length<this.nacl.secretbox.nonceLength)ut.error("Expected encrypted event nonce length to be ".concat(this.nacl.secretbox.nonceLength,", got: ").concat(r.length));else{var o=this.nacl.secretbox.open(i,r,this.key);if(null===o)return ut.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,(function(e,s){e?ut.error("Failed to make a request to the authEndpoint: ".concat(s,". Unable to fetch new key, so dropping encrypted event")):(o=n.nacl.secretbox.open(i,r,n.key),null!==o?n.emit(t,n.getDataToEmit(o)):ut.error("Failed to decrypt event with new key. Dropping encrypted event"))}));this.emit(t,this.getDataToEmit(o))}}}else ut.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+e);else ut.debug("Received encrypted event before key has been retrieved from the authEndpoint")}},{key:"getDataToEmit",value:function(t){var e=Object(Kt["decode"])(t);try{return JSON.parse(e)}catch(n){return e}}}]),n}(Gt),ee=function(t){l(n,t);var e=h(n);function n(t,i){var r;f(this,n),r=e.call(this),r.state="initialized",r.connection=null,r.key=t,r.options=i,r.timeline=r.options.timeline,r.usingTLS=r.options.useTLS,r.errorCallbacks=r.buildErrorCallbacks(),r.connectionCallbacks=r.buildConnectionCallbacks(r.errorCallbacks),r.handshakeCallbacks=r.buildHandshakeCallbacks(r.errorCallbacks);var o=De.getNetwork();return o.bind("online",(function(){r.timeline.info({netinfo:"online"}),"connecting"!==r.state&&"unavailable"!==r.state||r.retryIn(0)})),o.bind("offline",(function(){r.timeline.info({netinfo:"offline"}),r.connection&&r.sendActivityCheck()})),r.updateStrategy(),r}return p(n,[{key:"connect",value:function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))}},{key:"send",value:function(t){return!!this.connection&&this.connection.send(t)}},{key:"send_event",value:function(t,e,n){return!!this.connection&&this.connection.send_event(t,e,n)}},{key:"disconnect",value:function(){this.disconnectInternally(),this.updateState("disconnected")}},{key:"isUsingTLS",value:function(){return this.usingTLS}},{key:"startConnecting",value:function(){var t=this;this.runner=this.strategy.connect(0,(function e(n,i){n?t.runner=t.strategy.connect(0,e):"error"===i.action?(t.emit("error",{type:"HandshakeError",error:i.error}),t.timeline.error({handshakeError:i.error})):(t.abortConnecting(),t.handshakeCallbacks[i.action](i))}))}},{key:"abortConnecting",value:function(){this.runner&&(this.runner.abort(),this.runner=null)}},{key:"disconnectInternally",value:function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var t=this.abandonConnection();t.close()}}},{key:"updateStrategy",value:function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}},{key:"retryIn",value:function(t){var e=this;this.timeline.info({action:"retry",delay:t}),t>0&&this.emit("connecting_in",Math.round(t/1e3)),this.retryTimer=new J(t||0,(function(){e.disconnectInternally(),e.connect()}))}},{key:"clearRetryTimer",value:function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}},{key:"setUnavailableTimer",value:function(){var t=this;this.unavailableTimer=new J(this.options.unavailableTimeout,(function(){t.updateState("unavailable")}))}},{key:"clearUnavailableTimer",value:function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}},{key:"sendActivityCheck",value:function(){var t=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new J(this.options.pongTimeout,(function(){t.timeline.error({pong_timed_out:t.options.pongTimeout}),t.retryIn(0)}))}},{key:"resetActivityCheck",value:function(){var t=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new J(this.activityTimeout,(function(){t.sendActivityCheck()})))}},{key:"stopActivityCheck",value:function(){this.activityTimer&&this.activityTimer.ensureAborted()}},{key:"buildConnectionCallbacks",value:function(t){var e=this;return V({},t,{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},activity:function(){e.resetActivityCheck()},error:function(t){e.emit("error",t)},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}})}},{key:"buildHandshakeCallbacks",value:function(t){var e=this;return V({},t,{connected:function(t){e.activityTimeout=Math.min(e.options.activityTimeout,t.activityTimeout,t.connection.activityTimeout||1/0),e.clearUnavailableTimer(),e.setConnection(t.connection),e.socket_id=e.connection.id,e.updateState("connected",{socket_id:e.socket_id})}})}},{key:"buildErrorCallbacks",value:function(){var t=this,e=function(e){return function(n){n.error&&t.emit("error",{type:"WebSocketError",error:n.error}),e(n)}};return{tls_only:e((function(){t.usingTLS=!0,t.updateStrategy(),t.retryIn(0)})),refused:e((function(){t.disconnect()})),backoff:e((function(){t.retryIn(1e3)})),retry:e((function(){t.retryIn(0)}))}}},{key:"setConnection",value:function(t){for(var e in this.connection=t,this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()}},{key:"abandonConnection",value:function(){if(this.connection){for(var t in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);var e=this.connection;return this.connection=null,e}}},{key:"updateState",value:function(t,e){var n=this.state;if(this.state=t,n!==t){var i=t;"connected"===i&&(i+=" with new socket ID "+e.socket_id),ut.debug("State changed",n+" -> "+i),this.timeline.info({state:t,params:e}),this.emit("state_change",{previous:n,current:t}),this.emit(t,e)}}},{key:"shouldRetry",value:function(){return"connecting"===this.state||"connected"===this.state}}]),n}(_t),ne=function(){function t(){f(this,t),this.channels={}}return p(t,[{key:"add",value:function(t,e){return this.channels[t]||(this.channels[t]=function(t,e){if(0===t.indexOf("private-encrypted-")){if(e.config.nacl)return re.createEncryptedChannel(t,e,e.config.nacl);var n=w.buildLogSuffix("encryptedChannelSupport");throw new P("".concat("Tried to subscribe to a private-encrypted- channel but no nacl implementation available",". ").concat(n))}if(0===t.indexOf("private-"))return re.createPrivateChannel(t,e);if(0===t.indexOf("presence-"))return re.createPresenceChannel(t,e);if(0===t.indexOf("#"))throw new x('Cannot create a channel with name "'+t+'".');return re.createChannel(t,e)}(t,e)),this.channels[t]}},{key:"all",value:function(){return function(t){var e=[];return K(t,(function(t){e.push(t)})),e}(this.channels)}},{key:"find",value:function(t){return this.channels[t]}},{key:"remove",value:function(t){var e=this.channels[t];return delete this.channels[t],e}},{key:"disconnect",value:function(){K(this.channels,(function(t){t.disconnect()}))}}]),t}();var ie={createChannels:function(){return new ne},createConnectionManager:function(t,e){return new ee(t,e)},createChannel:function(t,e){return new $t(t,e)},createPrivateChannel:function(t,e){return new Gt(t,e)},createPresenceChannel:function(t,e){return new Yt(t,e)},createEncryptedChannel:function(t,e,n){return new te(t,e,n)},createTimelineSender:function(t,e){return new Wt(t,e)},createHandshake:function(t,e){return new Jt(t,e)},createAssistantToTheTransportManager:function(t,e,n){return new Bt(t,e,n)}},re=ie,oe=function(){function t(e){f(this,t),this.options=e||{},this.livesLeft=this.options.lives||1/0}return p(t,[{key:"getAssistant",value:function(t){return re.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}},{key:"isAlive",value:function(){return this.livesLeft>0}},{key:"reportDeath",value:function(){this.livesLeft-=1}}]),t}(),se=function(){function t(e,n){f(this,t),this.strategies=e,this.loop=Boolean(n.loop),this.failFast=Boolean(n.failFast),this.timeout=n.timeout,this.timeoutLimit=n.timeoutLimit}return p(t,[{key:"isSupported",value:function(){return rt(this.strategies,G.method("isSupported"))}},{key:"connect",value:function(t,e){var n=this,i=this.strategies,r=0,o=this.timeout,s=null;return s=this.tryStrategy(i[r],t,{timeout:o,failFast:this.failFast},(function a(c,u){u?e(null,u):(r+=1,n.loop&&(r%=i.length),r<i.length?(o&&(o*=2,n.timeoutLimit&&(o=Math.min(o,n.timeoutLimit))),s=n.tryStrategy(i[r],t,{timeout:o,failFast:n.failFast},a)):e(!0))})),{abort:function(){s.abort()},forceMinPriority:function(e){t=e,s&&s.forceMinPriority(e)}}}},{key:"tryStrategy",value:function(t,e,n,i){var r=null,o=null;return n.timeout>0&&(r=new J(n.timeout,(function(){o.abort(),i(!0)}))),o=t.connect(e,(function(t,e){t&&r&&r.isRunning()&&!n.failFast||(r&&r.ensureAborted(),i(t,e))})),{abort:function(){r&&r.ensureAborted(),o.abort()},forceMinPriority:function(t){o.forceMinPriority(t)}}}}]),t}(),ae=function(){function t(e){f(this,t),this.strategies=e}return p(t,[{key:"isSupported",value:function(){return rt(this.strategies,G.method("isSupported"))}},{key:"connect",value:function(t,e){return function(t,e,n){var i=et(t,(function(t,i,r,o){return t.connect(e,n(i,o))}));return{abort:function(){tt(i,ce)},forceMinPriority:function(t){tt(i,(function(e){e.forceMinPriority(t)}))}}}(this.strategies,t,(function(t,n){return function(i,r){n[t].error=i,i?function(t){return function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0}(t,(function(t){return Boolean(t.error)}))}(n)&&e(!0):(tt(n,(function(t){t.forceMinPriority(r.transport.priority)})),e(null,r))}}))}}]),t}();function ce(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}var ue=function(){function t(e,n,i){f(this,t),this.strategy=e,this.transports=n,this.ttl=i.ttl||18e5,this.usingTLS=i.useTLS,this.timeline=i.timeline}return p(t,[{key:"isSupported",value:function(){return this.strategy.isSupported()}},{key:"connect",value:function(t,e){var n=this.usingTLS,i=function(t){var e=De.getLocalStorage();if(e)try{var n=e[le(t)];if(n)return JSON.parse(n)}catch(i){he(t)}return null}(n),r=[this.strategy];if(i&&i.timestamp+this.ttl>=G.now()){var o=this.transports[i.transport];o&&(this.timeline.info({cached:!0,transport:i.transport,latency:i.latency}),r.push(new se([o],{timeout:2*i.latency+1e3,failFast:!0})))}var s=G.now(),a=r.pop().connect(t,(function i(o,c){o?(he(n),r.length>0?(s=G.now(),a=r.pop().connect(t,i)):e(o)):(function(t,e,n){var i=De.getLocalStorage();if(i)try{i[le(t)]=at({timestamp:G.now(),transport:e,latency:n})}catch(r){}}(n,c.transport.name,G.now()-s),e(null,c))}));return{abort:function(){a.abort()},forceMinPriority:function(e){t=e,a&&a.forceMinPriority(e)}}}}]),t}();function le(t){return"pusherTransport"+(t?"TLS":"NonTLS")}function he(t){var e=De.getLocalStorage();if(e)try{delete e[le(t)]}catch(n){}}var de=function(){function t(e,n){var i=n.delay;f(this,t),this.strategy=e,this.options={delay:i}}return p(t,[{key:"isSupported",value:function(){return this.strategy.isSupported()}},{key:"connect",value:function(t,e){var n,i=this.strategy,r=new J(this.options.delay,(function(){n=i.connect(t,e)}));return{abort:function(){r.ensureAborted(),n&&n.abort()},forceMinPriority:function(e){t=e,n&&n.forceMinPriority(e)}}}}]),t}(),fe=function(){function t(e,n,i){f(this,t),this.test=e,this.trueBranch=n,this.falseBranch=i}return p(t,[{key:"isSupported",value:function(){var t=this.test()?this.trueBranch:this.falseBranch;return t.isSupported()}},{key:"connect",value:function(t,e){var n=this.test()?this.trueBranch:this.falseBranch;return n.connect(t,e)}}]),t}(),pe=function(){function t(e){f(this,t),this.strategy=e}return p(t,[{key:"isSupported",value:function(){return this.strategy.isSupported()}},{key:"connect",value:function(t,e){var n=this.strategy.connect(t,(function(t,i){i&&n.abort(),e(t,i)}));return n}}]),t}();function ve(t){return function(){return t.isSupported()}}var ge,ye=function(t,e,n){var i={};function r(e,r,o,s,a){var c=n(t,e,r,o,s,a);return i[e]=c,c}var o,s=Object.assign({},e,{hostNonTLS:t.wsHost+":"+t.wsPort,hostTLS:t.wsHost+":"+t.wssPort,httpPath:t.wsPath}),a=Object.assign({},s,{useTLS:!0}),c=Object.assign({},e,{hostNonTLS:t.httpHost+":"+t.httpPort,hostTLS:t.httpHost+":"+t.httpsPort,httpPath:t.httpPath}),u={loop:!0,timeout:15e3,timeoutLimit:6e4},l=new oe({minPingDelay:1e4,maxPingDelay:t.activityTimeout}),h=new oe({lives:2,minPingDelay:1e4,maxPingDelay:t.activityTimeout}),d=r("ws","ws",3,s,l),f=r("wss","ws",3,a,l),p=r("sockjs","sockjs",1,c),v=r("xhr_streaming","xhr_streaming",1,c,h),g=r("xdr_streaming","xdr_streaming",1,c,h),y=r("xhr_polling","xhr_polling",1,c),b=r("xdr_polling","xdr_polling",1,c),m=new se([d],u),k=new se([f],u),w=new se([p],u),_=new se([new fe(ve(v),v,g)],u),x=new se([new fe(ve(y),y,b)],u),S=new se([new fe(ve(_),new ae([_,new de(x,{delay:4e3})]),x)],u),C=new fe(ve(S),S,w);return o=e.useTLS?new ae([m,new de(C,{delay:2e3})]):new ae([m,new de(k,{delay:2e3}),new de(C,{delay:5e3})]),new ue(new pe(new fe(ve(d),o,C)),i,{ttl:18e5,timeline:e.timeline,useTLS:e.useTLS})},be={getRequest:function(t){var e=new window.XDomainRequest;return e.ontimeout=function(){t.emit("error",new S),t.close()},e.onerror=function(e){t.emit("error",e),t.close()},e.onprogress=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText)},e.onload=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText),t.emit("finished",200),t.close()},e},abortRequest:function(t){t.ontimeout=t.onerror=t.onprogress=t.onload=null,t.abort()}},me=be,ke=function(t){l(n,t);var e=h(n);function n(t,i,r){var o;return f(this,n),o=e.call(this),o.hooks=t,o.method=i,o.url=r,o}return p(n,[{key:"start",value:function(t){var e=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){e.close()},De.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(t)}},{key:"close",value:function(){this.unloader&&(De.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}},{key:"onChunk",value:function(t,e){while(1){var n=this.advanceBuffer(e);if(!n)break;this.emit("chunk",{status:t,data:n})}this.isBufferTooLong(e)&&this.emit("buffer_too_long")}},{key:"advanceBuffer",value:function(t){var e=t.slice(this.position),n=e.indexOf("\n");return-1!==n?(this.position+=n+1,e.slice(0,n)):null}},{key:"isBufferTooLong",value:function(t){return this.position===t.length&&t.length>262144}}]),n}(_t);(function(t){t[t["CONNECTING"]=0]="CONNECTING",t[t["OPEN"]=1]="OPEN",t[t["CLOSED"]=3]="CLOSED"})(ge||(ge={}));var we=ge,_e=1,xe=function(){function t(e,n){f(this,t),this.hooks=e,this.session=Ce(1e3)+"/"+function(t){for(var e=[],n=0;n<t;n++)e.push(Ce(32).toString(32));return e.join("")}(8),this.location=function(t){var e=/([^\?]*)\/*(\??.*)/.exec(t);return{base:e[1],queryString:e[2]}}(n),this.readyState=we.CONNECTING,this.openStream()}return p(t,[{key:"send",value:function(t){return this.sendRaw(JSON.stringify([t]))}},{key:"ping",value:function(){this.hooks.sendHeartbeat(this)}},{key:"close",value:function(t,e){this.onClose(t,e,!0)}},{key:"sendRaw",value:function(t){if(this.readyState!==we.OPEN)return!1;try{return De.createSocketRequest("POST",Se(function(t,e){return t.base+"/"+e+"/xhr_send"}(this.location,this.session))).start(t),!0}catch(e){return!1}}},{key:"reconnect",value:function(){this.closeStream(),this.openStream()}},{key:"onClose",value:function(t,e,n){this.closeStream(),this.readyState=we.CLOSED,this.onclose&&this.onclose({code:t,reason:e,wasClean:n})}},{key:"onChunk",value:function(t){if(200===t.status){var e;this.readyState===we.OPEN&&this.onActivity();var n=t.data.slice(0,1);switch(n){case"o":e=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(e);break;case"a":e=JSON.parse(t.data.slice(1)||"[]");for(var i=0;i<e.length;i++)this.onEvent(e[i]);break;case"m":e=JSON.parse(t.data.slice(1)||"null"),this.onEvent(e);break;case"h":this.hooks.onHeartbeat(this);break;case"c":e=JSON.parse(t.data.slice(1)||"[]"),this.onClose(e[0],e[1],!0);break}}}},{key:"onOpen",value:function(t){this.readyState===we.CONNECTING?(t&&t.hostname&&(this.location.base=function(t,e){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t);return n[1]+e+n[3]}(this.location.base,t.hostname)),this.readyState=we.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}},{key:"onEvent",value:function(t){this.readyState===we.OPEN&&this.onmessage&&this.onmessage({data:t})}},{key:"onActivity",value:function(){this.onactivity&&this.onactivity()}},{key:"onError",value:function(t){this.onerror&&this.onerror(t)}},{key:"openStream",value:function(){var t=this;this.stream=De.createSocketRequest("POST",Se(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",(function(e){t.onChunk(e)})),this.stream.bind("finished",(function(e){t.hooks.onFinished(t,e)})),this.stream.bind("buffer_too_long",(function(){t.reconnect()}));try{this.stream.start()}catch(e){G.defer((function(){t.onError(e),t.onClose(1006,"Could not start streaming",!1)}))}}},{key:"closeStream",value:function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}]),t}();function Se(t){var e=-1===t.indexOf("?")?"?":"&";return t+e+"t="+ +new Date+"&n="+_e++}function Ce(t){return De.randomInt(t)}var Te=xe,Pe={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}},Oe={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){200===e?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}},Ee={getRequest:function(t){var e=De.getXHRAPI(),n=new e;return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&n.responseText.length>0&&t.onChunk(n.status,n.responseText);break;case 4:n.responseText&&n.responseText.length>0&&t.onChunk(n.status,n.responseText),t.emit("finished",n.status),t.close();break}},n},abortRequest:function(t){t.onreadystatechange=null,t.abort()}},Le=Ee,Ie={createStreamingSocket:function(t){return this.createSocket(Pe,t)},createPollingSocket:function(t){return this.createSocket(Oe,t)},createSocket:function(t,e){return new Te(t,e)},createXHR:function(t,e){return this.createRequest(Le,t,e)},createRequest:function(t,e,n){return new ke(t,e,n)}},je=Ie;je.createXDR=function(t,e){return this.createRequest(me,t,e)};var Re,Ae=je,Me={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:o,DependenciesReceivers:b,getDefaultStrategy:ye,Transports:Ht,transportConnectionInitializer:function(){var t=this;t.timeline.info(t.buildTimelineMessage({transport:t.name+(t.options.useTLS?"s":"")})),t.hooks.isInitialized()?t.changeState("initialized"):t.hooks.file?(t.changeState("initializing"),m.load(t.hooks.file,{useTLS:t.options.useTLS},(function(e,n){t.hooks.isInitialized()?(t.changeState("initialized"),n(!0)):(e&&t.onError(e),t.onClose(),n(!1))}))):t.onClose()},HTTPFactory:Ae,TimelineTransport:pt,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(t){var e=this;window.Pusher=t;var n=function(){e.onDocumentBody(t.ready)};window.JSON?n():m.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:I,jsonp:lt}},onDocumentBody:function(t){var e=this;document.body?t():setTimeout((function(){e.onDocumentBody(t)}),0)},createJSONPRequest:function(t,e){return new dt(t,e)},createScriptRequest:function(t){return new ht(t)},getLocalStorage:function(){try{return window.localStorage}catch(t){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var t=this.getXHRAPI();return new t},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return Ut},createWebSocket:function(t){var e=this.getWebSocketAPI();return new e(t)},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);if(this.isXDRSupported(0===e.indexOf("https:")))return this.HTTPFactory.createXDR(t,e);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var t=this.getXHRAPI();return Boolean(t)&&void 0!==(new t).withCredentials},isXDRSupported:function(t){var e=t?"https:":"http:",n=this.getProtocol();return Boolean(window["XDomainRequest"])&&n===e},addUnloadListener:function(t){void 0!==window.addEventListener?window.addEventListener("unload",t,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",t)},removeUnloadListener:function(t){void 0!==window.addEventListener?window.removeEventListener("unload",t,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",t)},randomInt:function(t){return Math.floor(function(){var t=window.crypto||window["msCrypto"],e=t.getRandomValues(new Uint32Array(1))[0];return e/Math.pow(2,32)}()*t)}},De=Me;(function(t){t[t["ERROR"]=3]="ERROR",t[t["INFO"]=6]="INFO",t[t["DEBUG"]=7]="DEBUG"})(Re||(Re={}));var Ne=Re,He=function(){function t(e,n,i){f(this,t),this.key=e,this.session=n,this.events=[],this.options=i||{},this.sent=0,this.uniqueID=0}return p(t,[{key:"log",value:function(t,e){t<=this.options.level&&(this.events.push(V({},e,{timestamp:G.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}},{key:"error",value:function(t){this.log(Ne.ERROR,t)}},{key:"info",value:function(t){this.log(Ne.INFO,t)}},{key:"debug",value:function(t){this.log(Ne.DEBUG,t)}},{key:"isEmpty",value:function(){return 0===this.events.length}},{key:"send",value:function(t,e){var n=this,i=V({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(i,(function(t,i){t||n.sent++,e&&e(t,i)})),!0}},{key:"generateUniqueID",value:function(){return this.uniqueID++,this.uniqueID}}]),t}(),ze=function(){function t(e,n,i,r){f(this,t),this.name=e,this.priority=n,this.transport=i,this.options=r||{}}return p(t,[{key:"isSupported",value:function(){return this.transport.isSupported({useTLS:this.options.useTLS})}},{key:"connect",value:function(t,e){var n=this;if(!this.isSupported())return Ue(new E,e);if(this.priority<t)return Ue(new C,e);var i=!1,r=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),o=null,s=function t(){r.unbind("initialized",t),r.connect()},a=function(){o=re.createHandshake(r,(function(t){i=!0,l(),e(null,t)}))},c=function(t){l(),e(t)},u=function(){var t;l(),t=at(r),e(new T(t))},l=function(){r.unbind("initialized",s),r.unbind("open",a),r.unbind("error",c),r.unbind("closed",u)};return r.bind("initialized",s),r.bind("open",a),r.bind("error",c),r.bind("closed",u),r.initialize(),{abort:function(){i||(l(),o?o.close():r.close())},forceMinPriority:function(t){i||n.priority<t&&(o?o.close():r.close())}}}}]),t}();function Ue(t,e){return G.defer((function(){e(t)})),{abort:function(){},forceMinPriority:function(){}}}var Be=De.Transports,qe=function(t,e,n,i,r,o){var s=Be[n];if(!s)throw new O(n);var a,c=(!t.enabledTransports||-1!==Y(t.enabledTransports,e))&&(!t.disabledTransports||-1===Y(t.disabledTransports,e));return c?(r=Object.assign({ignoreNullOrigin:t.ignoreNullOrigin},r),a=new ze(e,i,o?o.getAssistant(s):s,r)):a=Fe,a},Fe={isSupported:function(){return!1},connect:function(t,e){var n=G.defer((function(){e(new E)}));return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}};var Xe=function(t){if("undefined"===typeof De.getAuthorizers()[t.transport])throw"'".concat(t.transport,"' is not a recognized auth transport");return function(e,n){var r=function(t,e){var n="socket_id="+encodeURIComponent(t.socketId);for(var i in e.params)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(e.params[i]);if(null!=e.paramsProvider){var r=e.paramsProvider();for(var i in r)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(r[i])}return n}(e,t);De.getAuthorizers()[t.transport](De,r,t,i.UserAuthentication,n)}},Je=function(t){if("undefined"===typeof De.getAuthorizers()[t.transport])throw"'".concat(t.transport,"' is not a recognized auth transport");return function(e,n){var r=function(t,e){var n="socket_id="+encodeURIComponent(t.socketId);for(var i in n+="&channel_name="+encodeURIComponent(t.channelName),e.params)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(e.params[i]);if(null!=e.paramsProvider){var r=e.paramsProvider();for(var i in r)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(r[i])}return n}(e,t);De.getAuthorizers()[t.transport](De,r,t,i.ChannelAuthorization,n)}};function We(t){return t.httpHost?t.httpHost:t.cluster?"sockjs-".concat(t.cluster,".pusher.com"):g.httpHost}function $e(t){return t.wsHost?t.wsHost:function(t){return"ws-".concat(t,".pusher.com")}(t.cluster)}function Ge(t){return"https:"===De.getProtocol()||!1!==t.forceTLS}function Ve(t){return"enableStats"in t?t.enableStats:"disableStats"in t&&!t.disableStats}function Qe(t){var e=Object.assign(Object.assign({},g.userAuthentication),t.userAuthentication);return"customHandler"in e&&null!=e["customHandler"]?e["customHandler"]:Xe(e)}function Ye(t,e){var n=function(t,e){var n;return"channelAuthorization"in t?n=Object.assign(Object.assign({},g.channelAuthorization),t.channelAuthorization):(n={transport:t.authTransport||g.authTransport,endpoint:t.authEndpoint||g.authEndpoint},"auth"in t&&("params"in t.auth&&(n.params=t.auth.params),"headers"in t.auth&&(n.headers=t.auth.headers)),"authorizer"in t&&(n.customHandler=function(t,e,n){var i={authTransport:e.transport,authEndpoint:e.endpoint,auth:{params:e.params,headers:e.headers}};return function(e,r){var o=t.channel(e.channelName),s=n(o,i);s.authorize(e.socketId,r)}}(e,n,t.authorizer))),n}(t,e);return"customHandler"in n&&null!=n["customHandler"]?n["customHandler"]:Je(n)}var Ke=function(t){l(n,t);var e=h(n);function n(t){var i;return f(this,n),i=e.call(this,(function(t,e){ut.debug("No callbacks on watchlist events for ".concat(t))})),i.pusher=t,i.bindWatchlistInternalEvent(),i}return p(n,[{key:"handleEvent",value:function(t){var e=this;t.data.events.forEach((function(t){e.emit(t.name,t)}))}},{key:"bindWatchlistInternalEvent",value:function(){var t=this;this.pusher.connection.bind("message",(function(e){var n=e.event;"pusher_internal:watchlist_events"===n&&t.handleEvent(e)}))}}]),n}(_t);var Ze=function(){var t,e,n=new Promise((function(n,i){t=n,e=i}));return{promise:n,resolve:t,reject:e}},tn=function(t){l(n,t);var e=h(n);function n(t){var i;return f(this,n),i=e.call(this,(function(t,e){ut.debug("No callbacks on user for "+t)})),i.signin_requested=!1,i.user_data=null,i.serverToUserChannel=null,i.signinDonePromise=null,i._signinDoneResolve=null,i._onAuthorize=function(t,e){if(t)return ut.warn("Error during signin: ".concat(t)),void i._cleanup();i.pusher.send_event("pusher:signin",{auth:e.auth,user_data:e.user_data})},i.pusher=t,i.pusher.connection.bind("state_change",(function(t){var e=t.previous,n=t.current;"connected"!==e&&"connected"===n&&i._signin(),"connected"===e&&"connected"!==n&&(i._cleanup(),i._newSigninPromiseIfNeeded())})),i.watchlist=new Ke(t),i.pusher.connection.bind("message",(function(t){var e=t.event;"pusher:signin_success"===e&&i._onSigninSuccess(t.data),i.serverToUserChannel&&i.serverToUserChannel.name===t.channel&&i.serverToUserChannel.handleEvent(t)})),i}return p(n,[{key:"signin",value:function(){this.signin_requested||(this.signin_requested=!0,this._signin())}},{key:"_signin",value:function(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),"connected"===this.pusher.connection.state&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}},{key:"_onSigninSuccess",value:function(t){try{this.user_data=JSON.parse(t.user_data)}catch(e){return ut.error("Failed parsing user data after signin: ".concat(t.user_data)),void this._cleanup()}if("string"!==typeof this.user_data.id||""===this.user_data.id)return ut.error("user_data doesn't contain an id. user_data: ".concat(this.user_data)),void this._cleanup();this._signinDoneResolve(),this._subscribeChannels()}},{key:"_subscribeChannels",value:function(){var t=this;this.serverToUserChannel=new $t("#server-to-user-".concat(this.user_data.id),this.pusher),this.serverToUserChannel.bind_global((function(e,n){0!==e.indexOf("pusher_internal:")&&0!==e.indexOf("pusher:")&&t.emit(e,n)})),function(e){e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==t.pusher.connection.state||e.subscribe()}(this.serverToUserChannel)}},{key:"_cleanup",value:function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}},{key:"_newSigninPromiseIfNeeded",value:function(){if(this.signin_requested&&(!this.signinDonePromise||this.signinDonePromise.done)){var t=Ze(),e=t.promise,n=t.resolve;t.reject;e.done=!1;var i=function(){e.done=!0};e.then(i).catch(i),this.signinDonePromise=e,this._signinDoneResolve=n}}}]),n}(_t),en=function(){function t(e,n){var i=this;f(this,t),function(t){if(null===t||void 0===t)throw"You must pass your app key when you instantiate Pusher."}(e),function(t){if(null==t)throw"You must pass an options object";if(null==t.cluster)throw"Options object must provide a cluster";"disableStats"in t&&ut.warn("The disableStats option is deprecated in favor of enableStats")}(n),this.key=e,this.config=function(t,e){var n={activityTimeout:t.activityTimeout||g.activityTimeout,cluster:t.cluster,httpPath:t.httpPath||g.httpPath,httpPort:t.httpPort||g.httpPort,httpsPort:t.httpsPort||g.httpsPort,pongTimeout:t.pongTimeout||g.pongTimeout,statsHost:t.statsHost||g.stats_host,unavailableTimeout:t.unavailableTimeout||g.unavailableTimeout,wsPath:t.wsPath||g.wsPath,wsPort:t.wsPort||g.wsPort,wssPort:t.wssPort||g.wssPort,enableStats:Ve(t),httpHost:We(t),useTLS:Ge(t),wsHost:$e(t),userAuthenticator:Qe(t),channelAuthorizer:Ye(t,e)};return"disabledTransports"in t&&(n.disabledTransports=t.disabledTransports),"enabledTransports"in t&&(n.enabledTransports=t.enabledTransports),"ignoreNullOrigin"in t&&(n.ignoreNullOrigin=t.ignoreNullOrigin),"timelineParams"in t&&(n.timelineParams=t.timelineParams),"nacl"in t&&(n.nacl=t.nacl),n}(n,this),this.channels=re.createChannels(),this.global_emitter=new _t,this.sessionID=De.randomInt(1e9),this.timeline=new He(this.key,this.sessionID,{cluster:this.config.cluster,features:t.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Ne.INFO,version:g.VERSION}),this.config.enableStats&&(this.timelineSender=re.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+De.TimelineTransport.name}));this.connection=re.createConnectionManager(this.key,{getStrategy:function(t){return De.getDefaultStrategy(i.config,t,qe)},timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",(function(){i.subscribeAll(),i.timelineSender&&i.timelineSender.send(i.connection.isUsingTLS())})),this.connection.bind("message",(function(t){var e=t.event,n=0===e.indexOf("pusher_internal:");if(t.channel){var r=i.channel(t.channel);r&&r.handleEvent(t)}n||i.global_emitter.emit(t.event,t.data)})),this.connection.bind("connecting",(function(){i.channels.disconnect()})),this.connection.bind("disconnected",(function(){i.channels.disconnect()})),this.connection.bind("error",(function(t){ut.warn(t)})),t.instances.push(this),this.timeline.info({instances:t.instances.length}),this.user=new tn(this),t.isReady&&this.connect()}return p(t,[{key:"channel",value:function(t){return this.channels.find(t)}},{key:"allChannels",value:function(){return this.channels.all()}},{key:"connect",value:function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isUsingTLS(),e=this.timelineSender;this.timelineSenderTimer=new W(6e4,(function(){e.send(t)}))}}},{key:"disconnect",value:function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}},{key:"bind",value:function(t,e,n){return this.global_emitter.bind(t,e,n),this}},{key:"unbind",value:function(t,e,n){return this.global_emitter.unbind(t,e,n),this}},{key:"bind_global",value:function(t){return this.global_emitter.bind_global(t),this}},{key:"unbind_global",value:function(t){return this.global_emitter.unbind_global(t),this}},{key:"unbind_all",value:function(t){return this.global_emitter.unbind_all(),this}},{key:"subscribeAll",value:function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)}},{key:"subscribe",value:function(t){var e=this.channels.add(t,this);return e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.connection.state||e.subscribe(),e}},{key:"unsubscribe",value:function(t){var e=this.channels.find(t);e&&e.subscriptionPending?e.cancelSubscription():(e=this.channels.remove(t),e&&e.subscribed&&e.unsubscribe())}},{key:"send_event",value:function(t,e,n){return this.connection.send_event(t,e,n)}},{key:"shouldUseTLS",value:function(){return this.config.useTLS}},{key:"signin",value:function(){this.user.signin()}}],[{key:"ready",value:function(){t.isReady=!0;for(var e=0,n=t.instances.length;e<n;e++)t.instances[e].connect()}},{key:"getClientFeatures",value:function(){return Z(it({ws:De.Transports.ws},(function(t){return t.isSupported({})})))}}]),t}();en.instances=[],en.isReady=!1,en.logToConsole=!1,en.Runtime=De,en.ScriptReceivers=De.ScriptReceivers,en.DependenciesReceivers=De.DependenciesReceivers,en.auth_callbacks=De.auth_callbacks;var nn=e["default"]=en;De.setup(en)}])}))}).call(this,n("62e4")(t))},c5f7:function(t,e,n){n("c975"),n("d401"),n("d3b7"),n("25f0"),t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.__esModule=!0,t.exports["default"]=t.exports},c60d:function(t,e,n){var i=n("1a2d");t.exports=function(t){return void 0!==t&&(i(t,"value")||i(t,"writable"))}},e305:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"mainIndex"},[n("v-uni-view",{staticClass:"rightRecord",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jumprecord.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"Recordimage",attrs:{src:"/static/ainew/logo.png",mode:""}})],1),n("v-uni-scroll-view",{staticClass:"content",attrs:{"scroll-y":"true","scroll-top":t.scrollTop,"scroll-with-animation":!0},on:{scrolltoupper:function(e){arguments[0]=e=t.$handleEvent(e),t.loadmoreFun.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"contentmessage"},[t._l(t.messageList,(function(e){return[e.isMy?t._e():n("v-uni-view",{staticClass:"left"},[n("v-uni-view",{staticClass:"head"},[n("v-uni-image",{staticClass:"headImage",attrs:{src:e.user.avatar,mode:""}})],1),n("v-uni-view",{staticClass:"chatleftBox"},[0==e.record_type?n("v-uni-image",{staticClass:"chatleft",attrs:{src:"/static/newicon/chatleft.png",mode:""}}):t._e(),2==e.record_type?n("v-uni-image",{staticClass:"chatleft",attrs:{src:"/static/newicon/redpac.png",mode:""}}):t._e()],1),n("v-uni-view",[n("v-uni-view",{staticStyle:{"font-size":"24rpx","margin-top":"-20rpx"}},[t._v(t._s(e.user.name))]),0==e.record_type?n("v-uni-view",{staticClass:"message",on:{longpress:function(e){arguments[0]=e=t.$handleEvent(e),t.longPressHandler.apply(void 0,arguments)}}},[n("v-uni-text",[t._v(t._s(e.content))])],1):t._e(),1==e.record_type?n("v-uni-image",{staticStyle:{width:"45%","margin-right":"25rpx","border-radius":"10rpx"},attrs:{src:e.content,mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openImage("/static/company.png")}}}):t._e(),2==e.record_type?n("v-uni-view",{staticClass:"Treasurebox",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.jumpChatMoney(e.id)}}},[n("v-uni-view",{staticClass:"top"},[n("v-uni-image",{attrs:{src:"/static/newicon/goldcoin.png",mode:""}}),n("v-uni-view",{staticClass:"rightred"},[t._v(t._s(e.content))])],1),n("v-uni-view",{staticStyle:{color:"#fff","margin-left":"20rpx","font-size":"28rpx"}},[t._v("Treasure Box")])],1):t._e()],1)],1),e.isMy?n("v-uni-view",{staticClass:"right"},[2==e.record_type?n("v-uni-view",{staticClass:"Treasurebox",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.jumpChatMoney(e.id)}}},[n("v-uni-view",{staticClass:"top"},[n("v-uni-image",{attrs:{src:"/static/newicon/goldcoin.png",mode:""}}),n("v-uni-view",{staticClass:"rightred"},[t._v(t._s(e.content))])],1),n("v-uni-view",{staticStyle:{color:"#fff","margin-left":"20rpx","font-size":"28rpx"}},[t._v("Treasure Box")])],1):t._e(),0==e.record_type?n("v-uni-view",{staticClass:"message",staticStyle:{"background-color":"#95EC69","margin-right":"-5rpx"}},[n("v-uni-text",[t._v(t._s(e.content))])],1):t._e(),1==e.record_type?n("v-uni-image",{staticStyle:{width:"45%","margin-right":"25rpx","border-radius":"10rpx"},attrs:{src:e.content,mode:"widthFix"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.openImage(e.content)}}}):t._e(),n("v-uni-view",{staticClass:"chatleftBox",staticStyle:{"margin-right":"10rpx","margin-left":"0"}},[0==e.record_type?n("v-uni-image",{staticClass:"chatleft",attrs:{src:"/static/newicon/chatright.png",mode:""}}):t._e(),2==e.record_type?n("v-uni-image",{staticClass:"chatleft",attrs:{src:"/static/newicon/redpac.png",mode:""}}):t._e()],1),n("v-uni-view",{staticClass:"head"},[n("v-uni-image",{staticClass:"headImage",attrs:{src:e.user.avatar,mode:""}})],1)],1):t._e()]}))],2)],1),n("v-uni-view",{staticClass:"sumbitInput"},[n("v-uni-view",{staticClass:"sumbitInputItem"},[n("v-uni-image",{attrs:{src:"/static/newicon/picture.png",mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upMain.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"inputitemBox"},[n("v-uni-input",{attrs:{type:"text",placeholder:"sent message"},model:{value:t.messageInfo,callback:function(e){t.messageInfo=e},expression:"messageInfo"}})],1),n("v-uni-view",{staticClass:"right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sentMesage(0)}}},[n("v-uni-image",{attrs:{src:"/static/newicon/push.png",mode:""}})],1)],1)],1)],1)},r=[]},e50d:function(t,e,n){n("8172"),n("efec"),n("a4d3"),n("e01a"),n("d3b7"),n("d9e2"),n("d401"),n("a9e3");var i=n("7037")["default"];t.exports=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},e660:function(t,e,n){"use strict";var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Channel=void 0;var r=i(n("53ca"));function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(){return u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u.apply(this,arguments)}function l(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function d(t,e){return d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},d(t,e)}function f(t,e){if(e&&("object"===(0,r.default)(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function p(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=h(t);if(e){var r=h(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f(this,n)}}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("d9e2"),n("d401"),n("7a82"),n("131a"),n("3410"),n("f8c9"),n("4ae1"),n("ac1f"),n("5319"),n("2ca0"),n("d81d"),n("b64b"),n("159b"),n("14d9"),n("4de4"),n("07ac");var v=function(){function t(){s(this,t)}return c(t,[{key:"listenForWhisper",value:function(t,e){return this.listen(".client-"+t,e)}},{key:"notification",value:function(t){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",t)}},{key:"stopListeningForWhisper",value:function(t,e){return this.stopListening(".client-"+t,e)}}]),t}();e.Channel=v;var g=function(){function t(e){s(this,t),this.namespace=e}return c(t,[{key:"format",value:function(t){return"."===t.charAt(0)||"\\"===t.charAt(0)?t.substr(1):(this.namespace&&(t=this.namespace+"."+t),t.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(t){this.namespace=t}}]),t}(),y=function(t){l(n,t);var e=p(n);function n(t,i,r){var o;return s(this,n),o=e.call(this),o.name=i,o.pusher=t,o.options=r,o.eventFormatter=new g(o.options.namespace),o.subscribe(),o}return c(n,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(t,e){return this.on(this.eventFormatter.format(t),e),this}},{key:"listenToAll",value:function(t){var e=this;return this.subscription.bind_global((function(n,i){if(!n.startsWith("pusher:")){var r=e.options.namespace.replace(/\./g,"\\"),o=n.startsWith(r)?n.substring(r.length+1):"."+n;t(o,i)}})),this}},{key:"stopListening",value:function(t,e){return e?this.subscription.unbind(this.eventFormatter.format(t),e):this.subscription.unbind(this.eventFormatter.format(t)),this}},{key:"stopListeningToAll",value:function(t){return t?this.subscription.unbind_global(t):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(t){return this.on("pusher:subscription_succeeded",(function(){t()})),this}},{key:"error",value:function(t){return this.on("pusher:subscription_error",(function(e){t(e)})),this}},{key:"on",value:function(t,e){return this.subscription.bind(t,e),this}}]),n}(v),b=function(t){l(n,t);var e=p(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"whisper",value:function(t,e){return this.pusher.channels.channels[this.name].trigger("client-".concat(t),e),this}}]),n}(y),m=function(t){l(n,t);var e=p(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"whisper",value:function(t,e){return this.pusher.channels.channels[this.name].trigger("client-".concat(t),e),this}}]),n}(y),k=function(t){l(n,t);var e=p(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"here",value:function(t){return this.on("pusher:subscription_succeeded",(function(e){t(Object.keys(e.members).map((function(t){return e.members[t]})))})),this}},{key:"joining",value:function(t){return this.on("pusher:member_added",(function(e){t(e.info)})),this}},{key:"whisper",value:function(t,e){return this.pusher.channels.channels[this.name].trigger("client-".concat(t),e),this}},{key:"leaving",value:function(t){return this.on("pusher:member_removed",(function(e){t(e.info)})),this}}]),n}(y),w=function(t){l(n,t);var e=p(n);function n(t,i,r){var o;return s(this,n),o=e.call(this),o.events={},o.listeners={},o.name=i,o.socket=t,o.options=r,o.eventFormatter=new g(o.options.namespace),o.subscribe(),o}return c(n,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(t,e){return this.on(this.eventFormatter.format(t),e),this}},{key:"stopListening",value:function(t,e){return this.unbindEvent(this.eventFormatter.format(t),e),this}},{key:"subscribed",value:function(t){return this.on("connect",(function(e){t(e)})),this}},{key:"error",value:function(t){return this}},{key:"on",value:function(t,e){var n=this;return this.listeners[t]=this.listeners[t]||[],this.events[t]||(this.events[t]=function(e,i){n.name===e&&n.listeners[t]&&n.listeners[t].forEach((function(t){return t(i)}))},this.socket.on(t,this.events[t])),this.listeners[t].push(e),this}},{key:"unbind",value:function(){var t=this;Object.keys(this.events).forEach((function(e){t.unbindEvent(e)}))}},{key:"unbindEvent",value:function(t,e){this.listeners[t]=this.listeners[t]||[],e&&(this.listeners[t]=this.listeners[t].filter((function(t){return t!==e}))),e&&0!==this.listeners[t].length||(this.events[t]&&(this.socket.removeListener(t,this.events[t]),delete this.events[t]),delete this.listeners[t])}}]),n}(v),_=function(t){l(n,t);var e=p(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"whisper",value:function(t,e){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(t),data:e}),this}}]),n}(w),x=function(t){l(n,t);var e=p(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"here",value:function(t){return this.on("presence:subscribed",(function(e){t(e.map((function(t){return t.user_info})))})),this}},{key:"joining",value:function(t){return this.on("presence:joining",(function(e){return t(e.user_info)})),this}},{key:"whisper",value:function(t,e){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(t),data:e}),this}},{key:"leaving",value:function(t){return this.on("presence:leaving",(function(e){return t(e.user_info)})),this}}]),n}(_),S=function(t){l(n,t);var e=p(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(t,e){return this}},{key:"listenToAll",value:function(t){return this}},{key:"stopListening",value:function(t,e){return this}},{key:"subscribed",value:function(t){return this}},{key:"error",value:function(t){return this}},{key:"on",value:function(t,e){return this}}]),n}(v),C=function(t){l(n,t);var e=p(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"whisper",value:function(t,e){return this}}]),n}(S),T=function(t){l(n,t);var e=p(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"here",value:function(t){return this}},{key:"joining",value:function(t){return this}},{key:"whisper",value:function(t,e){return this}},{key:"leaving",value:function(t){return this}}]),n}(S),P=function(){function t(e){s(this,t),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(e),this.connect()}return c(t,[{key:"setOptions",value:function(t){this.options=u(this._defaultOptions,t);var e=this.csrfToken();return e&&(this.options.auth.headers["X-CSRF-TOKEN"]=e,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=e),e=this.options.bearerToken,e&&(this.options.auth.headers["Authorization"]="Bearer "+e,this.options.userAuthentication.headers["Authorization"]="Bearer "+e),t}},{key:"csrfToken",value:function(){var t;return"undefined"!==typeof window&&window["Laravel"]&&window["Laravel"].csrfToken?window["Laravel"].csrfToken:this.options.csrfToken?this.options.csrfToken:"undefined"!==typeof document&&"function"===typeof document.querySelector&&(t=document.querySelector('meta[name="csrf-token"]'))?t.getAttribute("content"):null}}]),t}(),O=function(t){l(n,t);var e=p(n);function n(){var t;return s(this,n),t=e.apply(this,arguments),t.channels={},t}return c(n,[{key:"connect",value:function(){"undefined"!==typeof this.options.client?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(t,e,n){return this.channel(t).listen(e,n)}},{key:"channel",value:function(t){return this.channels[t]||(this.channels[t]=new y(this.pusher,t,this.options)),this.channels[t]}},{key:"privateChannel",value:function(t){return this.channels["private-"+t]||(this.channels["private-"+t]=new b(this.pusher,"private-"+t,this.options)),this.channels["private-"+t]}},{key:"encryptedPrivateChannel",value:function(t){return this.channels["private-encrypted-"+t]||(this.channels["private-encrypted-"+t]=new m(this.pusher,"private-encrypted-"+t,this.options)),this.channels["private-encrypted-"+t]}},{key:"presenceChannel",value:function(t){return this.channels["presence-"+t]||(this.channels["presence-"+t]=new k(this.pusher,"presence-"+t,this.options)),this.channels["presence-"+t]}},{key:"leave",value:function(t){var e=this,n=[t,"private-"+t,"private-encrypted-"+t,"presence-"+t];n.forEach((function(t,n){e.leaveChannel(t)}))}},{key:"leaveChannel",value:function(t){this.channels[t]&&(this.channels[t].unsubscribe(),delete this.channels[t])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),n}(P),E=function(t){l(n,t);var e=p(n);function n(){var t;return s(this,n),t=e.apply(this,arguments),t.channels={},t}return c(n,[{key:"connect",value:function(){var t=this,e=this.getSocketIO();return this.socket=e(this.options.host,this.options),this.socket.on("reconnect",(function(){Object.values(t.channels).forEach((function(t){t.subscribe()}))})),this.socket}},{key:"getSocketIO",value:function(){if("undefined"!==typeof this.options.client)return this.options.client;if("undefined"!==typeof io)return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(t,e,n){return this.channel(t).listen(e,n)}},{key:"channel",value:function(t){return this.channels[t]||(this.channels[t]=new w(this.socket,t,this.options)),this.channels[t]}},{key:"privateChannel",value:function(t){return this.channels["private-"+t]||(this.channels["private-"+t]=new _(this.socket,"private-"+t,this.options)),this.channels["private-"+t]}},{key:"presenceChannel",value:function(t){return this.channels["presence-"+t]||(this.channels["presence-"+t]=new x(this.socket,"presence-"+t,this.options)),this.channels["presence-"+t]}},{key:"leave",value:function(t){var e=this,n=[t,"private-"+t,"presence-"+t];n.forEach((function(t){e.leaveChannel(t)}))}},{key:"leaveChannel",value:function(t){this.channels[t]&&(this.channels[t].unsubscribe(),delete this.channels[t])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),n}(P),L=function(t){l(n,t);var e=p(n);function n(){var t;return s(this,n),t=e.apply(this,arguments),t.channels={},t}return c(n,[{key:"connect",value:function(){}},{key:"listen",value:function(t,e,n){return new S}},{key:"channel",value:function(t){return new S}},{key:"privateChannel",value:function(t){return new C}},{key:"encryptedPrivateChannel",value:function(t){return new C}},{key:"presenceChannel",value:function(t){return new T}},{key:"leave",value:function(t){}},{key:"leaveChannel",value:function(t){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),n}(P),I=function(){function t(e){s(this,t),this.options=e,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return c(t,[{key:"channel",value:function(t){return this.connector.channel(t)}},{key:"connect",value:function(){"pusher"==this.options.broadcaster?this.connector=new O(this.options):"socket.io"==this.options.broadcaster?this.connector=new E(this.options):"null"==this.options.broadcaster?this.connector=new L(this.options):"function"==typeof this.options.broadcaster&&(this.connector=new this.options.broadcaster(this.options))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(t){return this.connector.presenceChannel(t)}},{key:"leave",value:function(t){this.connector.leave(t)}},{key:"leaveChannel",value:function(t){this.connector.leaveChannel(t)}},{key:"leaveAllChannels",value:function(){for(var t in this.connector.channels)this.leaveChannel(t)}},{key:"listen",value:function(t,e,n){return this.connector.listen(t,e,n)}},{key:"private",value:function(t){return this.connector.privateChannel(t)}},{key:"encryptedPrivate",value:function(t){return this.connector.encryptedPrivateChannel(t)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){"function"===typeof Vue&&Vue.http&&this.registerVueRequestInterceptor(),"function"===typeof axios&&this.registerAxiosRequestInterceptor(),"function"===typeof jQuery&&this.registerjQueryAjaxSetup(),"object"===("undefined"===typeof Turbo?"undefined":o(Turbo))&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var t=this;Vue.http.interceptors.push((function(e,n){t.socketId()&&e.headers.set("X-Socket-ID",t.socketId()),n()}))}},{key:"registerAxiosRequestInterceptor",value:function(){var t=this;axios.interceptors.request.use((function(e){return t.socketId()&&(e.headers["X-Socket-Id"]=t.socketId()),e}))}},{key:"registerjQueryAjaxSetup",value:function(){var t=this;"undefined"!=typeof jQuery.ajax&&jQuery.ajaxPrefilter((function(e,n,i){t.socketId()&&i.setRequestHeader("X-Socket-Id",t.socketId())}))}},{key:"registerTurboRequestInterceptor",value:function(){var t=this;document.addEventListener("turbo:before-fetch-request",(function(e){e.detail.fetchOptions.headers["X-Socket-Id"]=t.socketId()}))}}]),t}();e.default=I},ed6d:function(t,e,n){n("d9e2"),n("d401"),n("7a82");var i=n("4a4b");t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)},t.exports.__esModule=!0,t.exports["default"]=t.exports},f8c9:function(t,e,n){var i=n("23e7"),r=n("da84"),o=n("d44e");i({global:!0},{Reflect:{}}),o(r.Reflect,"Reflect",!0)},fb2c:function(t,e,n){var i=n("74e8");i("Uint32",(function(t){return function(e,n,i){return t(this,e,n,i)}}))},ffb1:function(t,e,n){"use strict";n.r(e);var i=n("29f1"),r=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=r.a}}]);